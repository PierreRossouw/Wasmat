<!DOCTYPE html>
<html>
<head>
  <link href="prism.css" rel="stylesheet" />
</head>
<body>
  <pre><code class="language-c">// Compile.wasmat v0.0.20170629 - Self-compiling compiler for a toy language targeting WebAssembly

// As a convention, pointers and functions returning pointers start with a Capital letter
i32 sizeInt := 4

// Enums
i32 nodes_program    := 1
i32 nodes_block      := 2
i32 nodes_binary     := 3
i32 nodes_unary      := 4
i32 nodes_call       := 5
i32 nodes_return     := 6
i32 nodes_if         := 7
i32 nodes_loop       := 8
i32 nodes_break      := 9
i32 nodes_continue   := 10
i32 nodes_fun        := 11
i32 nodes_variable   := 12
i32 nodes_parameter  := 13
i32 nodes_literal    := 14

i32 tokens_identifier  := 43
i32 tokens_charLiteral := 46
i32 tokens_numLiteral  := 47
i32 tokens_lParen      := 50
i32 tokens_comma       := 51
i32 tokens_rParen      := 52
i32 tokens_fun         := 60
i32 tokens_return      := 61
i32 tokens_endfun      := 62
i32 tokens_loop        := 70
i32 tokens_continue    := 71
i32 tokens_break       := 72
i32 tokens_endloop     := 73
i32 tokens_if          := 80
i32 tokens_then        := 82
i32 tokens_else        := 83
i32 tokens_endif       := 84
i32 tokens_minPrec     := 99
i32 tokens_assign      := 100  // :=
i32 tokens_or          := 101
i32 tokens_and         := 102
i32 tokens_eq          := 110  // =
i32 tokens_ne          := 111  // <>
i32 tokens_lt          := 112  // <
i32 tokens_le          := 113  // <=
i32 tokens_gt          := 114  // >
i32 tokens_ge          := 115  // >=
i32 tokens_add         := 118  // +
i32 tokens_sub         := 119  // -
i32 tokens_mul         := 120  // *
i32 tokens_div         := 121  // /
i32 tokens_mod         := 123
i32 tokens_not         := 123
i32 tokens_f64         := 124
i32 tokens_f32         := 125
i32 tokens_i64         := 126
i32 tokens_i32         := 127

// Structs. Bytes 0-3 are reserved for optional magic numbers used for debugging
i32 string_length := 4
i32 string_Chars := 8

i32 list_First := 4
i32 list_Last  := 8
i32 list_count := 12
i32 list_size  := 16

i32 listItem_Next := 4 
i32 listItem_Item := 8
i32 listItem_size := 12

i32 dictItem_Next := 4  // inherited from listItem
i32 dictItem_Name := 8
i32 dictItem_Item := 12
i32 dictItem_size := 16

i32 token_Next   := 4  // inherited from listItem
i32 token_kind   := 8
i32 token_Value  := 12
i32 token_line   := 16
i32 token_column := 20
i32 token_size   := 24

i32 node_Next       := 4   // inherited from listItem
i32 node_kind       := 8   // from the nodes_ enum
i32 node_type       := 12  // from the tokens_ enum
i32 node_index      := 16  // 0 based index number for funs, variables, parameters
i32 node_String     := 20  // literal value or fun/var/parameter name
i32 node_Scope      := 24  // scope for program/block/loop/fun
i32 node_ANode      := 28  // binary left, call callee, return expression, then block, fun body
i32 node_BNode      := 32  // binary/unary right, else block, fun return, variable assignment
i32 node_CNode      := 36  // if statement condition
i32 node_Nodes      := 40  // node list for program/block/fun locals
i32 node_ParamNodes := 44  // param node list for call/fun
i32 node_size       := 48

i32 scope_Node       := 4
i32 scope_index      := 8 
i32 scope_Parent     := 12 
i32 scope_Symbols    := 16 
i32 scope_localIndex := 20
i32 scope_size       := 24

// Global variables
i32 Heap            := 4  // Memory management - reserve 0-3 for null pointers
i32 TokenList       := 0
i32 funIndex        := 0  // Next function index number
i32 CurrentToken    := 0
i32 CurrentScope    := 0
i32 GlobalScope     := 0
i32 RootNode        := 0
i32 Binary          := 0
i32 BinaryPointer   := 0
i32 emitGlobalCount := 0
i32 emitFunCount    := 0

// Dummy entries to simplify the parser
fun store32(i32 Location, i32 value)  // 0x  09 00 20 00 20 01 36 00 00 0b
endfun                               

fun store8(i32 Location, i32 value)  // 0x  09 00 20 00 20 01 3a 00 00 0b
endfun

fun i32 load32(i32 Location)  // 0x  07 00 20 00 28 00 00 0b
  return 0
endfun

fun i32 load8(i32 Location)  // 0x  07 00 20 00 2d 00 00 0b
  return 0
endfun

// Memory management
fun i32 Alloc(i32 len)
  i32 r := Heap
  Heap := Heap + len
  if Heap mod sizeInt then
    Heap := Heap + sizeInt - Heap mod sizeInt  // fix the alignment
  endif
  return r
endfun

fun i32 NewListItem()
  store32(Heap, 2 - 256)  // Magic debugging number to identify structs in memory 
  return Alloc(listItem_size)
endfun

fun i32 NewList()
  store32(Heap, 3 - 256)  // Magic number
  return Alloc(list_size)
endfun

fun i32 NewDictItem()
  store32(Heap, 4 - 256)  // Magic number
  return Alloc(dictItem_size)
endfun

fun i32 NewToken()
  store32(Heap, 5 - 256)  // Magic number
  return Alloc(token_size)
endfun

fun i32 NewNode()
  store32(Heap, 6 - 256)  // Magic number
  i32 Node := Alloc(node_size)
  store32(Node + node_Scope, CurrentScope)
  return Node
endfun

fun i32 NewScope()
  store32(Heap, 7 - 256)  // Magic number
  i32 Scope := Alloc(scope_size)
  store32(Scope + scope_Symbols, NewList())
  return Scope
endfun

// Pascal-style strings: We store the length instead of using a null terminator
fun i32 NewString(i32 len)
  store32(Heap, 1 - 256)  // Magic number
  i32 String := Alloc(string_Chars + len)
  store32(String + string_length, len)
  return String
endfun

fun i32 strLen(i32 String)
  return load32(String + string_length)
endfun

fun i32 getchar(i32 String, i32 offset)
  return load8(String + string_Chars + offset)
endfun

fun setchar(i32 String, i32 offset, i32 chr)
  store8(String + string_Chars + offset, chr)
endfun

fun i32 Substring(i32 String, i32 offset, i32 length)
  if offset >= strLen(String) then
    length := 0
  endif
  if (offset + length) >= strLen(String) then
    length := strLen(String) - offset
  endif
  i32 R := NewString(length)
  loop
    if length = 0 then break endif
    length := length - 1
    setchar(R, length, getchar(String, offset + length))
  endloop
  return R
endfun

fun i32 strCompare(i32 A, i32 B)
  i32 len := strLen(A)
  i32 offset := 0
  i32 r := 1
  if len = strLen(B) then
    loop
      if getchar(A, offset) <> getchar(B, offset) then
        r := 0
        break
      endif
      if offset >= len then break endif
      offset := offset + 1
    endloop
  else
    r := 0
  endif
  return r
endfun

fun i32 strcomp1(i32 V, i32 a)
  i32 r := 1
  if strLen(V) <> 1 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
  endif
  return r
endfun

// Crappy helper funs
fun i32 strcomp2(i32 V, i32 a, i32 b)
  i32 r := 1
  if strLen(V) <> 2 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp3(i32 V, i32 a, i32 b, i32 c) 
  i32 r := 1
  if strLen(V) <> 3 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp4(i32 V, i32 a, i32 b, i32 c, i32 d)
  i32 r := 1
  if strLen(V) <> 4 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
    if getchar(V, 3) <> d then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp5(i32 V, i32 a, i32 b, i32 c, i32 d, i32 e)
  i32 r := 1
  if strLen(V) <> 5 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
    if getchar(V, 3) <> d then r := 0 endif
    if getchar(V, 4) <> e then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp6(i32 V, i32 a, i32 b, i32 c, i32 d, i32 e, i32 f)
  i32 r := 1
  if strLen(V) <> 6 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
    if getchar(V, 3) <> d then r := 0 endif
    if getchar(V, 4) <> e then r := 0 endif
    if getchar(V, 5) <> f then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp7(i32 V, i32 a, i32 b, i32 c, i32 d, i32 e, i32 f, i32 g)
  i32 r := 1
  if strLen(V) <> 7 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
    if getchar(V, 3) <> d then r := 0 endif
    if getchar(V, 4) <> e then r := 0 endif
    if getchar(V, 5) <> f then r := 0 endif
    if getchar(V, 6) <> g then r := 0 endif
  endif
  return r
endfun

fun i32 strcomp8(i32 V, i32 a, i32 b, i32 c, i32 d, i32 e, i32 f, i32 g, i32 h)
  i32 r := 1
  if strLen(V) <> 7 then
    r := 0
  else
    if getchar(V, 0) <> a then r := 0 endif
    if getchar(V, 1) <> b then r := 0 endif
    if getchar(V, 2) <> c then r := 0 endif
    if getchar(V, 3) <> d then r := 0 endif
    if getchar(V, 4) <> e then r := 0 endif
    if getchar(V, 5) <> f then r := 0 endif
    if getchar(V, 6) <> g then r := 0 endif
    if getchar(V, 7) <> h then r := 0 endif
  endif
  return r
endfun

// Lists
fun listAdd(i32 List, i32 NewItem)
  if not load32(List + list_First) then
    store32(List + list_First, NewItem)
  else
    store32(load32(List + list_Last) + listItem_Next, NewItem) 
  endif
  store32(List + list_Last, NewItem) 
  store32(List + list_count, load32(List + list_count) + 1)
endfun

// Find a string in a list
fun i32 DictSearch(i32 List, i32 FindName)
  i32 DictItem := load32(List + list_First)
  i32 Item := 0
  loop
    if not DictItem then break endif
    if strCompare(load32(DictItem + dictItem_Name), FindName) then
      Item := load32(DictItem + dictItem_Item)
      break
    endif
    DictItem := load32(DictItem + listItem_Next)
  endloop
  return Item
endfun

// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// Lexer
// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

fun addToken(i32 kind, i32 Value, i32 line, i32 column)
  i32 Token := NewToken()
  store32(Token + token_kind, kind)
  store32(Token + token_Value, Value)
  store32(Token + token_line, line)
  store32(Token + token_column, column)
  if not TokenList then
    TokenList := NewList()
  endif
  listAdd(TokenList, Token)
endfun

fun processToken(i32 Val, i32 line, i32 column)
  i32 kind := tokens_identifier 
  if strcomp1(Val, 40) then kind := tokens_lParen endif
  if strcomp1(Val, 44) then kind := tokens_comma endif
  if strcomp1(Val, 41) then kind := tokens_rParen endif
  if strcomp3(Val, 102, 117, 110) then kind := tokens_fun endif
  if strcomp6(Val, 114, 101, 116, 117, 114, 110) then kind := tokens_return endif
  if strcomp6(Val, 101, 110, 100, 102, 117, 110) then kind := tokens_endfun endif
  if strcomp4(Val, 108, 111, 111, 112) then kind := tokens_loop endif
  if strcomp8(Val, 99, 111, 110, 116, 105, 110, 117, 101) then kind := tokens_continue endif
  if strcomp5(Val, 98, 114, 101, 97, 107) then kind := tokens_break endif
  if strcomp7(Val, 101, 110, 100, 108, 111, 111, 112) then kind := tokens_endloop endif
  if strcomp2(Val, 105, 102) then kind := tokens_if endif
  if strcomp4(Val, 101, 108, 115, 101)  then kind := tokens_else endif
  if strcomp5(Val, 101, 110, 100, 105, 102) then kind := tokens_endif endif
  if strcomp3(Val, 105, 51, 50) then kind := tokens_i32 endif
  if strcomp3(Val, 105, 54, 52) then kind := tokens_i64 endif
  if strcomp3(Val, 102, 51, 50) then kind := tokens_f32 endif
  if strcomp3(Val, 102, 54, 52) then kind := tokens_f64 endif
  if strcomp2(Val, 58, 61) then kind := tokens_assign endif
  if strcomp2(Val, 111, 114) then kind := tokens_or endif
  if strcomp3(Val, 97, 110, 100) then kind := tokens_and endif
  if strcomp1(Val, 61) then kind := tokens_eq endif
  if strcomp2(Val, 60, 62) then kind := tokens_ne endif
  if strcomp1(Val, 60) then kind := tokens_lt endif
  if strcomp2(Val, 60, 61) then kind := tokens_le endif
  if strcomp1(Val, 62) then kind := tokens_gt endif
  if strcomp2(Val, 62, 61) then kind := tokens_ge endif
  if strcomp1(Val, 43) then kind := tokens_add endif
  if strcomp1(Val, 45) then kind := tokens_sub endif
  if strcomp1(Val, 42) then kind := tokens_mul endif
  if strcomp1(Val, 47) then kind := tokens_div endif
  if strcomp3(Val, 109, 111, 100) then kind := tokens_mod endif
  if strcomp3(Val, 110, 111, 116) then kind := tokens_not endif
  addToken(kind, Val, line, column)
endfun

fun i32 isWhitespace(i32 chr)
  return chr = 0 or chr = 9 or chr = 13 or chr = 32  // tab, cr, space
endfun

fun i32 isAlpha(i32 chr)
  return (chr >= 97 and chr <= 122) or (chr >= 97 and chr <= 122) or (chr = 95)
endfun

fun i32 isNumber(i32 chr)
  return chr >= 48 and chr <= 57
endfun

fun i32 isPunctuator(i32 chr)
  return chr = 40 or chr = 41 or chr = 44
endfun

fun i32 isOperatorChar(i32 chr)
  return chr = 61 or chr = 43 or chr = 45 or chr = 47 or 
         chr = 60 or chr = 62 or chr = 42 or chr = 58 
endfun

fun lexx(i32 Code)
  i32 pos := -1
  i32 line := 1
  i32 col := 0
  i32 len := strLen(Code)
  i32 chr := 0
  i32 start := 0
  i32 Val := 0
  loop
    pos := pos + 1
    col := col + 1
    chr := getchar(Code, pos) 
    if isWhitespace(chr) then continue endif
    if chr = 10 then  // newline
      line := line + 1
      col := 0
      continue
    endif
    if isAlpha(chr) then  
      start := pos
      loop
        if (not isAlpha(chr)) and (not isNumber(chr)) then
          pos := pos - 1
          col := col - 1
          break
        endif
        pos := pos + 1
        col := col + 1
        chr := getchar(Code, pos)
      endloop
      Val := Substring(Code, start, pos - start + 1)
      processToken(Val, line, col)
      continue
    endif
    if isNumber(chr) or ((chr = 45) and isNumber(getchar(Code, pos + 1))) then
      start := pos
      loop
        if (not isNumber(chr)) and (chr <> 45) then
          pos := pos - 1
          col := col - 1
          break
        endif
        pos := pos + 1
        col := col + 1
        chr := getchar(Code, pos)
      endloop
      Val := Substring(Code, start, pos - start + 1)
      addToken(tokens_numLiteral, Val, line, col)
      continue
    endif
    if (chr = 47) and (getchar(Code, pos + 1) = 47) then
      loop
        if chr = 10 then
          col := 0
          line := line + 1
          break
        endif
        pos := pos + 1
        col := col + 1
        chr := getchar(Code, pos)
      endloop
      continue
    endif
    if isPunctuator(chr) then
      Val := Substring(Code, pos, 1)
      processToken(Val, line, col)
      continue
    endif
    if isOperatorChar(chr) then
      if isOperatorChar(getchar(Code, pos + 1)) then
        Val := Substring(Code, pos, 2)
        pos := pos + 1
        col := col + 1
      else
        Val := Substring(Code, pos, 1)
      endif
      processToken(Val, line, col)
    endif
    if pos >= len then break endif
  endloop
endfun

// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// Scoper
// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

fun pushScope(i32 Node)
  i32 Scope := NewScope()
  store32(Scope + scope_Node, Node)
  if CurrentScope then
    store32(Scope + scope_index, load32(CurrentScope + scope_index) + 1)
    store32(Scope + scope_Parent, CurrentScope)
  endif
  store32(Node + node_Scope, Scope)
  CurrentScope := Scope
endfun

fun popScope()
  if CurrentScope then
    CurrentScope := load32(CurrentScope + scope_Parent)
  endif
endfun

fun i32 LookupFunctionScope(i32 Scope)
  i32 FunScope := Scope
  loop
    if not FunScope then break endif
    if load32(load32(FunScope + scope_Node) + node_kind) then break endif
    FunScope := load32(FunScope + scope_Parent)
  endloop
  return FunScope
endfun

fun scopeRegister(i32 Scope, i32 Name, i32 Node)
  i32 DictItem := NewDictItem()
  i32 nodeKind := load32(Node + node_kind)
  i32 FunScope := 0
  store32(DictItem + dictItem_Name, Name)
  store32(DictItem + dictItem_Item, Node)
  listAdd(load32(Scope + scope_Symbols), DictItem)
  if nodeKind = nodes_variable or nodeKind = nodes_parameter then
    FunScope := LookupFunctionScope(Scope)
    i32 nextIndex := load32(FunScope + scope_localIndex)
    store32(Node + node_index, nextIndex)
    store32(FunScope + scope_localIndex, nextIndex + 1)
  endif
endfun

fun i32 ScopeResolve(i32 Scope, i32 Name)
  i32 Node := 0
  i32 RecurseScope := Scope
  loop
    if not RecurseScope then break endif
    Node := DictSearch(load32(RecurseScope + scope_Symbols), Name)
    if Node then break endif
    RecurseScope := load32(RecurseScope + scope_Parent)
  endloop
  return Node
endfun

// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// Parser
// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

fun next()
  CurrentToken := load32(CurrentToken + token_Next)
endfun

fun i32 isBinaryOperator(i32 Token)
  return load32(Token + token_kind) = tokens_assign
endfun

fun i32 isUnaryOperator(i32 Token)
  i32 kind := load32(Token + token_kind)
  return kind = tokens_sub or kind = tokens_not
endfun

fun i32 isLiteral(i32 Token)
  i32 kind := load32(Token + token_kind)
  return kind = tokens_numLiteral or kind = tokens_identifier
endfun

fun i32 isNativeType(i32 Token)
  i32 kind := load32(Token + token_kind)
  return kind = tokens_i32 or kind = tokens_i64 or kind = tokens_f32 or kind = tokens_f64
endfun

fun eatToken(i32 kind)
  if load32(CurrentToken + token_kind) = kind then
    next() 
  else
    // 0x 00 unreachable
  endif
endfun

fun i32 ParseFunParams()
  i32 Params := NewList()
  i32 type := 0
  i32 FunParamNode := 0
  eatToken(tokens_lParen)
  loop
    type := load32(CurrentToken + token_kind)
    if type = tokens_rParen then break endif
    next()
    FunParamNode := NewNode()
    store32(FunParamNode + node_kind, nodes_parameter)
    store32(FunParamNode + node_type, type)
    store32(FunParamNode + node_String, load32(CurrentToken + token_Value))
    listAdd(Params, FunParamNode)
    next()
    if load32(CurrentToken + token_kind) <> tokens_comma then break endif
    next()
  endloop
  eatToken(tokens_rParen)
  return Params
endfun

fun i32 ParseFunBlock()
  i32 Node := NewNode()
  i32 BodyList := NewList()
  i32 ChildNode := 0
  store32(Node + node_kind, nodes_block)
  store32(Node + node_Nodes, BodyList)
  store32(Node + node_Scope, CurrentScope)
  loop
    if not CurrentToken then break endif
    if load32(CurrentToken + token_kind) = tokens_endfun then break endif
    ChildNode := ParseStatement()
    if not ChildNode then break endif
    listAdd(BodyList, ChildNode)
  endloop
  return Node
endfun

fun i32 ParseFunDeclaration(i32 type, i32 Name)
  i32 Node := NewNode()
  i32 Locals := NewList()
  i32 ParamList := 0
  i32 ParamName := 0
  i32 ParamNode := 0
  store32(Node + node_kind, nodes_fun)
  store32(Node + node_index, funIndex)
  funIndex := funIndex + 1
  store32(Node + node_type, type)
  store32(Node + node_String, Name)
  store32(Node + node_Nodes, Locals)
  scopeRegister(CurrentScope, Name, Node)
  ParamList := ParseFunParams()
  store32(Node + node_ParamNodes, ParamList)
  pushScope(Node)
  ParamNode := load32(ParamList + list_First)
  loop
    if not ParamNode then break endif
    ParamName := load32(ParamNode + node_String)
    scopeRegister(CurrentScope, ParamName, ParamNode)
    ParamNode := load32(ParamNode + listItem_Next)
  endloop
  store32(Node + node_ANode, ParseFunBlock())
  popScope()
  eatToken(tokens_endfun)
  return Node
endfun

fun i32 ParseFun()
  i32 funType := 0
  i32 Name := 0
  if isNativeType(CurrentToken) then
    funType := load32(CurrentToken + token_kind)
    next()
  endif
  Name := load32(CurrentToken + token_Value)
  next()
  return ParseFunDeclaration(funType, Name)
endfun

fun i32 ParseBreak()
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_break)
  eatToken(tokens_break)
  return Node
endfun

fun i32 ParseContinue()
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_continue)
  eatToken(tokens_continue)
  return Node
endfun

fun i32 ParseLiteral()
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_literal)
  store32(Node + node_String, load32(CurrentToken + token_Value))
  store32(Node + node_type, load32(CurrentToken + token_kind))
  next()
  return Node
endfun

fun i32 ParseCallParams()
  i32 ParamList := NewList()
  eatToken(tokens_lParen)
  loop
    if load32(CurrentToken + token_kind) = tokens_rParen then break endif
    listAdd(ParamList, ParseExpression(tokens_minPrec))
    if load32(CurrentToken + token_kind) <> tokens_comma then break endif
    eatToken(tokens_comma)
  endloop
  eatToken(tokens_rParen)
  return ParamList
endfun

fun i32 ParseCallExpression(i32 Callee)
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_call)
  store32(Node + node_ANode, Callee)
  store32(Node + node_ParamNodes, ParseCallParams())
  return Node
endfun

fun i32 parseUnaryExpression()
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_unary)
  store32(Node + node_type, load32(CurrentToken + token_kind))
  store32(Node + node_String, load32(CurrentToken + token_Value))
  next()
  store32(Node + node_BNode, ParseExpression(tokens_add))
  return Node
endfun

fun i32 ParsePrefix()
  i32 Node := 0
  if isLiteral(CurrentToken) then
    Node := ParseLiteral()
  else
    if load32(CurrentToken + token_kind) = tokens_lParen then
      next()
      Node := ParseExpression(tokens_minPrec)
      eatToken(tokens_rParen)
    else
      if isUnaryOperator(CurrentToken) then
        Node := parseUnaryExpression()
      endif
    endif
  endif
  return Node
endfun

fun i32 ParseBinaryExpression(i32 level, i32 Left)
  i32 Node := 0
  i32 precedence := load32(CurrentToken + token_kind)  // node_kind doubles as the precedence
  if level > precedence then
    Node := Left
  else
    Node := NewNode()
    store32(Node + node_kind, nodes_binary)
    store32(Node + node_type, load32(CurrentToken + token_kind))
    store32(Node + node_String, load32(CurrentToken + token_Value))
    store32(Node + node_ANode, Left)
    next()
    store32(Node + node_BNode, ParseExpression(precedence))
  endif
  return Node
endfun

fun i32 ParseInfix(i32 level, i32 Left)
  i32 Node := 0
  if isBinaryOperator(CurrentToken) then
    Node := ParseBinaryExpression(level, Left)
  else
    if load32(CurrentToken + token_kind) = tokens_lParen then
      Node := ParseCallExpression(Left)
    else
      Node := Left
    endif
  endif
  return Node
endfun

fun i32 ParseExpression(i32 level)
  i32 Node := 0
  i32 Expr := 0
  if load32(CurrentToken + token_kind) = tokens_break then
    Node := ParseBreak()
  else
    if load32(CurrentToken + token_kind) = tokens_continue then
      Node := ParseContinue()
    else
      Node := ParsePrefix()
      loop
        if not CurrentToken then break endif
        Expr := ParseInfix(level, Node)
        if Expr = 0 or Expr = Node then break endif
        Node := Expr
      endloop
    endif
  endif
  return Node
endfun

fun i32 ParseReturnStatement()
  i32 Node := NewNode()
  i32 Scope := 0
  eatToken(tokens_return)
  store32(Node + node_kind, nodes_return)
  store32(Node + node_ANode, ParseExpression(tokens_minPrec))
  Scope := CurrentScope
  loop
    if not Scope then break endif
    if load32(load32(Scope + scope_Node) + node_kind) = nodes_fun then break endif
    Scope := load32(Scope + scope_Parent)
  endloop
  store32(load32(Scope + scope_Node) + node_ANode, Node)
  return Node
endfun

fun i32 ParseIfBlock()
  i32 Node := NewNode()
  i32 BodyList := NewList()
  i32 ChildNode := 0
  store32(Node + node_kind, nodes_block)
  store32(Node + node_Nodes, BodyList)
  store32(Node + node_Scope, CurrentScope)
  loop
    if not CurrentToken then break endif
    if load32(CurrentToken + token_kind) = tokens_else then break endif
    if load32(CurrentToken + token_kind) = tokens_endif then break endif
    ChildNode := ParseStatement()
    if not ChildNode then break endif
    listAdd(BodyList, ChildNode)
  endloop
  return Node
endfun

fun i32 ParseIfStatement()
  i32 Node := NewNode()
  eatToken(tokens_if)
  store32(Node + node_kind, nodes_if)
  store32(Node + node_CNode, ParseExpression(tokens_minPrec))
  eatToken(tokens_then)
  pushScope(Node)
  store32(Node + node_ANode, ParseIfBlock())
  popScope()
  if load32(CurrentToken + token_kind) = tokens_else then
    eatToken(tokens_else)
    pushScope(Node)
    store32(Node + node_BNode, ParseIfBlock())
    popScope()
  endif
  eatToken(tokens_endif)
  return Node
endfun

fun i32 ParseLoopBlock()
  i32 Node := NewNode()
  i32 BodyList := NewList()
  i32 ChildNode := 0
  store32(Node + node_kind, nodes_block)
  store32(Node + node_Nodes, BodyList)
  store32(Node + node_Scope, CurrentScope)
  loop
    if not CurrentToken then break endif
    if load32(CurrentToken + token_kind) = tokens_endloop then break endif
    ChildNode := ParseStatement()
    if not ChildNode then break endif
    listAdd(BodyList, ChildNode)
  endloop
  return Node
endfun

fun i32 ParseLoopStatement()
  i32 Node := NewNode()
  eatToken(tokens_loop)
  store32(Node + node_kind, nodes_loop)
  pushScope(Node)
  store32(Node + node_ANode, ParseLoopBlock())
  popScope()
  eatToken(tokens_endloop)
  return Node
endfun

fun i32 ParseDeclaration()
  i32 type := load32(CurrentToken + token_kind)
  next()
  i32 Name := load32(CurrentToken + token_Value)
  next()
  i32 Node := NewNode()
  store32(Node + node_kind, nodes_variable)
  store32(Node + node_type, type)
  store32(Node + node_String, Name)
  scopeRegister(CurrentScope, Name, Node)
  eatToken(tokens_assign)
  store32(Node + node_BNode, ParseExpression(tokens_minPrec))
  if load32(CurrentScope + scope_Parent) then
    i32 FunNode := load32(LookupFunctionScope(CurrentScope) + scope_Node)
    i32 FunLocalsList := load32(FunNode + node_Nodes)
    if not FunLocalsList then
      FunLocalsList := NewList()
      store32(FunNode + node_Nodes, FunLocalsList)
    endif
    listAdd(FunLocalsList, Node)
  endif
  return Node
endfun

fun i32 ParseStatement()
  i32 Node := 0
  if load32(CurrentToken + token_kind) = tokens_fun then
    eatToken(tokens_fun)
    Node := ParseFun()
  else
    if isNativeType(CurrentToken) then
      Node := ParseDeclaration()
    else
      if load32(CurrentToken + token_kind) = tokens_return then
        Node := ParseReturnStatement()
      else
        if load32(CurrentToken + token_kind) = tokens_if then
          Node := ParseIfStatement()
        else
          if load32(CurrentToken + token_kind) = tokens_loop then
            Node := ParseLoopStatement()
          else
            Node := ParseExpression(tokens_minPrec)
          endif
        endif
      endif
    endif
  endif
  return Node
endfun

fun parse()
  RootNode := NewNode()
  CurrentToken := load32(TokenList + list_First)
  store32(RootNode + node_kind, nodes_program)
  pushScope(RootNode)
  GlobalScope := CurrentScope  
  i32 Child := 0
  i32 BodyList := NewList()
  store32(RootNode + node_Nodes, BodyList)
  loop
    if not CurrentToken then break endif
    Child := ParseStatement()
    if not Child then break endif
    listAdd(BodyList, Child)
  endloop
endfun

// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// Compiler
// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

fun i32 strToI32(i32 V)  // works on non-negative ints and 0x0-style hex with lowercase a-f
  i32 hex := 0
  i32 i := 0
  i32 l := strLen(V)
  i32 offset := 0
  i32 c := 0
  if l >= 3 then
    if getchar(V, 0) = 48 and getchar(V, 1) = 120 then
      hex := 1
    endif
  endif
  if hex then
    offset := 2
    loop
      if offset >= l then break endif
      i := i * 16
      c := getchar(V, offset)
      if c >= 48 and c <= 57 then  // 0-9
        i := i + c - 48
      else
        if c >= 97 and c <= 102 then  // a-f
          i := i + c - 97 + 10
        endif
      endif
      offset := offset + 1
    endloop
  else
    loop
      if offset >= l then break endif
      i := i * 10
      c := getchar(V, offset)
      if c >= 48 and c <= 57 then  // 0-9
        i := i + c - 48
      endif
      offset := offset + 1
    endloop
  endif
  return i
endfun

fun emitByte(i32 byte)
  store8(BinaryPointer, byte)
  BinaryPointer := BinaryPointer + 1
endfun

fun emitI32(i32 byte)
  store32(BinaryPointer, byte)
  BinaryPointer := BinaryPointer + 4
endfun

fun i32 uleblen(i32 i)
  i32 len := 0
  if i <= 127 then
    len := 1
  else
    if i <= 16383 then
      len := 2
    else
      if i <= 2097151 then
        len := 3
      else
        if i <= 268435455 then
          len := 4
        else
          len := 5
        endif
      endif
    endif
  endif
  return len
endfun

fun emitUleb(i32 i)  // en.wikipedia.org/wiki/LEB128
  loop
    if i < 128 then break endif
    emitByte(128 + (i mod 128))
    i := i / 128  
  endloop
  emitByte(i)
endfun

fun fixUlebGuess(i32 Start, i32 offset)
  i32 Copy := BinaryPointer
  if offset > 0 then
    loop
      Copy := Copy - 1
      if Copy < Start then break endif
      store8(Copy + offset, load8(Copy))
    endloop
  endif
endfun

fun emitType(i32 Node)
  i32 ParamList := load32(Node + node_ParamNodes)
  emitByte(0x60)  // fun type
  emitUleb(load32(ParamList + list_count)) 
  i32 ParamNode := load32(ParamList + list_First)
  loop
    if not ParamNode then break endif
    emitByte(load32(ParamNode + node_type))
    ParamNode := load32(ParamNode + node_Next)
  endloop
  i32 returnType := load32(Node + node_type)
  if returnType then
    emitByte(0x01)  // return count
    emitByte(returnType)
  else
    emitByte(0x00)  // return count
  endif
endfun

fun emitTypeSection()
  i32 BodyList := load32(RootNode + node_Nodes)
  i32 Skip := BinaryPointer
  if BodyList then
    if load32(BodyList + list_count) then
      emitByte(0x01)  // Type section
      emitByte(0x00)  // section size (guess)
      i32 Start := BinaryPointer 
      emitByte(0x00)  // types count (guess)  
      i32 count := 0
      i32 Node := load32(BodyList + list_First)
      loop
        if load32(Node + node_kind) = nodes_fun then
          emitType(Node)
          count := count + 1
          emitFunCount := emitFunCount + 1
        endif
        Node := load32(Node + node_Next)
        if not Node then break endif
      endloop
      i32 length := BinaryPointer - Start
      i32 offset := uleblen(count) + uleblen(length) - 2
      fixUlebGuess(Start, offset)
      BinaryPointer := Start - 1
      emitUleb(length)
      emitUleb(count)
      BinaryPointer := BinaryPointer + length - 1
    endif
  endif
  if not emitFunCount then BinaryPointer := Skip endif
endfun

fun emitFunctionSection()
  if emitFunCount then
    emitByte(0x03)  // Function section
    emitByte(0x00)  // section size (guess)
    i32 Start := BinaryPointer 
    emitUleb(emitFunCount)  // types count
    i32 counter := 0
    loop
      if counter >= emitFunCount then break endif
      emitUleb(counter)
      counter := counter + 1
    endloop
    i32 length := BinaryPointer - Start
    i32 offset := uleblen(length) - 1
    fixUlebGuess(Start, offset)
    BinaryPointer := Start - 1
    emitUleb(length)
    BinaryPointer := BinaryPointer + length
  endif
endfun

fun emitMemorySection()
  emitByte(0x05)  // Memory section
  emitUleb(0x03)  // size in bytes
  emitByte(0x01)  // count
  emitByte(0x00)  // resizable flag
  emitByte(0x01)  // pages (page = 64kb)
endfun

fun emitGlobalSection()
  i32 BodyList := load32(RootNode + node_Nodes)
  i32 Skip := BinaryPointer
  if BodyList then
    if load32(BodyList + list_count) then
      emitByte(0x06)  // Section code
      emitByte(0x00)  // Section size (guess)
      i32 Start := BinaryPointer 
      emitByte(0x00)  // globals count (guess)
      i32 count := 0
      i32 Node := load32(BodyList + list_First)
      loop
        if load32(Node + node_kind) = nodes_variable then
          emitByte(load32(Node + node_type))  // native type
          emitByte(1)  // mutable
          emitByte(65)  // i32_const
          i32 Value := load32(load32(Node + node_BNode) + node_String)
          emitUleb(strToI32(Value))
          emitByte(11)
          count := count + 1
          emitGlobalCount := emitGlobalCount + 1
        endif
        Node := load32(Node + node_Next)
        if not Node then break endif
      endloop
      i32 length := BinaryPointer - Start
      i32 offset := uleblen(count) + uleblen(length) - 2
      fixUlebGuess(Start, offset)
      BinaryPointer := Start - 1
      emitUleb(length)
      emitUleb(count)
      BinaryPointer := BinaryPointer + length - 1
    endif
  endif
  if not emitGlobalCount then BinaryPointer := Skip endif
endfun

fun emitAssignment(i32 Node)
  i32 ResolvedNode := ScopeResolve(CurrentScope, load32(load32(Node + node_ANode) + node_String))
  emitNode(load32(Node + node_BNode))
  if load32(ResolvedNode + node_Scope) = GlobalScope then
    emitByte(0x24)  // set_global
  else
    emitByte(0x21)  // set_local
  endif
  emitUleb(load32(ResolvedNode + node_index))
endfun

fun emitOperator(i32 type)
  if type = tokens_eq then emitByte(0x46) endif
  if type = tokens_ne then emitByte(0x47) endif
  if type = tokens_lt then emitByte(0x48) endif
  if type = tokens_le then emitByte(0x4c) endif
  if type = tokens_gt then emitByte(0x4a) endif
  if type = tokens_ge then emitByte(0x4e) endif
  if type = tokens_add then emitByte(0x6a) endif
  if type = tokens_sub then emitByte(0x6b) endif
  if type = tokens_mul then emitByte(0x6c) endif
  if type = tokens_div then emitByte(0x6d) endif
  if type = tokens_mod then emitByte(0x6f) endif
  if type = tokens_and then emitByte(0x71) endif
  if type = tokens_or then emitByte(0x72) endif
  if type = tokens_not then emitByte(0x72) endif
endfun

fun emitUnary(i32 Node)
  i32 type := load32(Node + node_type)
  if type = tokens_sub then
    emitByte(0x41)  // i32.const 
    emitByte(0x00)  // 0
  endif
  emitNode(load32(Node + node_BNode))
  emitOperator(type)
endfun

fun emitLiteral(i32 Node)
  i32 type := load32(Node + node_type) 
  i32 num := 0
  if type = tokens_numLiteral then
    emitByte(0x41)  // i32.const
    num := strToI32(load32(Node + node_String))
    emitUleb(num)
  else
    if type = tokens_identifier then
      i32 ResolvedNode := ScopeResolve(CurrentScope, load32(Node + node_String))
      if load32(ResolvedNode + node_Scope) = GlobalScope then
        emitByte(0x23)  // get_global
      else
        emitByte(0x20)  // get_local
      endif
      emitUleb(load32(ResolvedNode + node_index))
    endif
  endif
endfun

fun emitCall(i32 Node)
  i32 ParamList := load32(Node + node_ParamNodes)
  i32 Param := load32(ParamList + list_First)
  loop
    if not Param then break endif
    emitNode(Param)
    Param := load32(Param + node_Next)
  endloop
  i32 Name := load32(Node + node_String)
  if strcomp7(Name, 115, 116, 111, 114, 101, 51, 50) then  // store32
    emitByte(0x36)  // i32.store32
    emitByte(0x00)  // alignment
    emitByte(0x00)  // offset
  else
    if strcomp6(Name, 115, 116, 111, 114, 101, 56) then  // store8
      emitByte(0x3a)  // i32.store8
      emitByte(0x00)  // alignment
      emitByte(0x00)  // offset
    else 
      if strcomp6(Name, 108, 111, 97, 100, 51, 50) then  // load32
        emitByte(0x28)  // i32.load32
        emitByte(0x00)  // alignment
        emitByte(0x00)  // offset
      else
        if strcomp5(Name, 108, 111, 97, 100, 56) then  // load8
          emitByte(0x2d)  // i32.load8
          emitByte(0x00)  // alignment
          emitByte(0x00)  // offset
        else
          i32 ResolvedNode := ScopeResolve(CurrentScope, Name)
          emitByte(0x10)  // call
          emitUleb(load32(ResolvedNode + node_index))
        endif
      endif
    endif
  endif
endfun

fun emitBlock(i32 Node)
  i32 kind := load32(Node + node_kind)
  i32 type := load32(Node + node_type)
  i32 Scope := load32(Node + node_Scope)
  if Scope then
    CurrentScope := Scope
  endif
  i32 BlockList := load32(Node + node_Nodes)
  i32 ListNode := load32(BlockList + list_First)
  loop
    if not ListNode then break endif
    emitNode(ListNode)
    ListNode := load32(ListNode + node_Next)
  endloop
  if Scope then
    CurrentScope := load32(CurrentScope + scope_Parent)
  endif
endfun

fun emitReturn(i32 Node)
  i32 ExprNode := load32(Node + node_ANode)
  emitNode(ExprNode)
endfun

fun emitIf(i32 Node)
  emitNode(load32(Node + node_CNode))  // condition
  emitByte(0x04)  // if
  emitByte(0x40)  // void
  emitNode(load32(Node + node_ANode))  // then block
  i32 ElseBlock := load32(Node + node_BNode)
  if ElseBlock then
    emitByte(0x05)  // else
    emitNode(ElseBlock)
  endif
  emitByte(0x0b)  // end
endfun

fun i32 loopLevel() 
  i32 Scope := CurrentScope
  i32 level := 0
  loop
    if not Scope then break endif
    if load32(load32(Scope + scope_Node) + node_kind) = nodes_loop then break endif
    level := level + 1
    Scope := load32(Scope + scope_Parent)
  endloop
  return level
endfun

fun emitLoop(i32 Node)
  emitByte(0x02)  // block
  emitByte(0x40)  // void 
  emitByte(0x03)  // loop
  emitByte(0x40)  // void 
  emitNode(load32(Node + node_ANode))
  emitByte(0x0c)  // br
  emitByte(0x00)  // level 
  emitByte(0x0b)  // end
  emitByte(0x0b)  // end
endfun

fun emitBreak(i32 Node)
  emitByte(0x0c)  // br
  emitUleb(loopLevel() - 1)
endfun

fun emitContinue(i32 Node)
  emitByte(0x0c)  // br
  emitUleb(loopLevel())
endfun

fun emitNode(i32 Node)
  i32 kind := load32(Node + node_kind)
  i32 type := load32(Node + node_type)
  if kind = nodes_block then
    emitBlock(Node)
  else
    if kind = nodes_binary then
      if type = tokens_assign then
        emitAssignment(Node)
      else
        emitNode(load32(Node + node_ANode))
        emitNode(load32(Node + node_BNode))
        emitOperator(type)
      endif
    else
      if kind = nodes_unary then
        emitUnary(Node)
      else
        if kind = nodes_call then
          emitCall(Node)
        else
          if kind = nodes_return then
            emitReturn(Node)
          else
            if kind = nodes_if then
              emitIf(Node)
            else
              if kind = nodes_loop then
                emitLoop(Node)
              else
                if kind = nodes_break then
                  emitBreak(Node)
                else
                  if kind = nodes_continue then
                    emitContinue(Node)
                  else
                    if kind = nodes_literal then
                      emitLiteral(Node)
                    endif
                  endif
                endif
              endif
            endif
          endif
        endif
      endif
    endif
  endif
endfun

fun emitFunCode(i32 Node)
  emitByte(0x00)  // function size (guess)
  i32 Start := BinaryPointer
  i32 ParamList := load32(Node + node_ParamNodes)
  emitUleb(load32(ParamList + list_count))
  i32 Param := load32(ParamList + list_First)
  loop
    if not Param then break endif
    emitByte(0x01)  // count
    emitByte(load32(Param + node_type))
    Param := load32(Param + listItem_Next)
  endloop
  emitNode(load32(Node + node_ANode))  // body block node
  emitByte(0x0b)  // end
  i32 length := BinaryPointer - Start
  i32 offset := uleblen(length) - 1
  fixUlebGuess(Start, offset)
  BinaryPointer := Start - 1
  emitUleb(length)
  BinaryPointer := BinaryPointer + length
endfun

fun emitCodeSection()
  if emitFunCount then
    emitByte(0x0a)  // Code section 
    emitByte(0x00)  // section size (guess)
    i32 Start := BinaryPointer 
    emitUleb(emitFunCount)
    i32 BodyList := load32(RootNode + node_Nodes)
    i32 FunNode := load32(BodyList + list_First)
    loop
      if load32(FunNode + node_kind) = nodes_fun then
        emitFunCode(FunNode)
      endif
      FunNode := load32(FunNode + node_Next)
      if not FunNode then break endif
    endloop
    i32 length := BinaryPointer - Start
    i32 offset := uleblen(length) - 1
    fixUlebGuess(Start, offset)
    BinaryPointer := Start - 1
    emitUleb(length)
    BinaryPointer := BinaryPointer + length
  endif
endfun

fun emit(i32 length)
  Binary := NewString(length + 256)  // heuristic: binary will be smaller than len(source) + C
  BinaryPointer := Binary + string_Chars
  CurrentScope := load32(RootNode + node_Scope)
  emitByte(0x00)  // wasm magic 00 61 73 6d
  emitByte(0x61)  // a
  emitByte(0x73)  // s
  emitByte(0x6d)  // m
  emitI32(1)  // wasm version
  emitTypeSection()
  emitFunctionSection()
  emitMemorySection()
  emitGlobalSection()
  emitCodeSection()
  store32(Binary + string_length, BinaryPointer - (Binary + string_length)) 
endfun

// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// Test compile
// XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

i32 N := 0  // wasmat program string
i32 o := 0  // next char counter

fun fun_()
  setchar(N, o, 102)  o := o + 1  // f
  setchar(N, o, 117)  o := o + 1  // u
  setchar(N, o, 110)  o := o + 1  // n
  setchar(N, o, 32)   o := o + 1  //
endfun

fun endfun_()
  setchar(N, o, 101)  o := o + 1  // e
  setchar(N, o, 110)  o := o + 1  // n
  setchar(N, o, 100)  o := o + 1  // d
  setchar(N, o, 102)  o := o + 1  // f
  setchar(N, o, 117)  o := o + 1  // u
  setchar(N, o, 110)  o := o + 1  // n
  setchar(N, o, 32)   o := o + 1  //
endfun

fun i32_()
  setchar(N, o, 105)  o := o + 1  // i
  setchar(N, o, 51)   o := o + 1  // 3
  setchar(N, o, 50)   o := o + 1  // 2
  setchar(N, o, 32)   o := o + 1  //
endfun

fun i32 main()
  N := NewString(100)  // arbitrary  
  i32_()                          // i32 
  setchar(N, o, 103)  o := o + 1  // g
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 58)   o := o + 1  // :
  setchar(N, o, 61)   o := o + 1  // =
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 51)   o := o + 1  // 3
  setchar(N, o, 32)   o := o + 1  //
  i32_()                          // i32 
  setchar(N, o, 104)  o := o + 1  // h
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 58)   o := o + 1  // :
  setchar(N, o, 61)   o := o + 1  // =
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 52)   o := o + 1  // 4
  setchar(N, o, 32)   o := o + 1  //
  fun_()                          // fun 
  setchar(N, o, 120)  o := o + 1  // x
  setchar(N, o, 40)   o := o + 1  // (
  setchar(N, o, 41)   o := o + 1  // )
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 103)  o := o + 1  // g
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 58)   o := o + 1  // :
  setchar(N, o, 61)   o := o + 1  // =
  setchar(N, o, 32)   o := o + 1  //
  setchar(N, o, 45)   o := o + 1  // -
  setchar(N, o, 104)  o := o + 1  // h
  setchar(N, o, 32)   o := o + 1  //
  endfun_()                       // endfun
  lexx(N)
  parse()
  emit(strLen(N))
  return Binary
endfun

// WASM binary for this version
// 0x 00 61 73 6d 01 00 00 00 01 e3 83 80 80 00 e3 80 80 80 00 60 02 7f 7f 00 60 02 7f 7f 00 60 01 7f 
// 0x 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 
// 0x 60 00 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 02 7f 7f 01 7f 60 03 7f 7f 7f 00 60 03 7f 7f 7f 01 
// 0x 7f 60 02 7f 7f 01 7f 60 02 7f 7f 01 7f 60 03 7f 7f 7f 01 7f 60 04 7f 7f 7f 7f 01 7f 60 05 7f 7f 
// 0x 7f 7f 7f 01 7f 60 06 7f 7f 7f 7f 7f 7f 01 7f 60 07 7f 7f 7f 7f 7f 7f 7f 01 7f 60 08 7f 7f 7f 7f 
// 0x 7f 7f 7f 7f 01 7f 60 09 7f 7f 7f 7f 7f 7f 7f 7f 7f 01 7f 60 02 7f 7f 00 60 02 7f 7f 01 7f 60 04 
// 0x 7f 7f 7f 7f 00 60 03 7f 7f 7f 00 60 01 7f 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 
// 0x 01 7f 01 7f 60 01 7f 00 60 01 7f 00 60 00 00 60 01 7f 01 7f 60 03 7f 7f 7f 00 60 02 7f 7f 01 7f 
// 0x 60 00 00 60 01 7f 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 01 7f 01 7f 60 01 7f 00 60 00 01 7f 60 
// 0x 00 01 7f 60 02 7f 7f 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 01 7f 
// 0x 01 7f 60 00 01 7f 60 00 01 7f 60 02 7f 7f 01 7f 60 02 7f 7f 01 7f 60 01 7f 01 7f 60 00 01 7f 60 
// 0x 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 01 7f 60 00 00 60 01 7f 01 7f 60 
// 0x 01 7f 00 60 01 7f 00 60 01 7f 01 7f 60 01 7f 00 60 02 7f 7f 00 60 01 7f 00 60 00 00 60 00 00 60 
// 0x 00 00 60 00 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 
// 0x 00 60 01 7f 00 60 00 01 7f 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 01 7f 00 60 00 00 
// 0x 60 01 7f 00 60 00 00 60 00 00 60 00 00 60 00 01 7f 03 e8 80 80 80 00 e3 80 80 80 00 00 01 02 03 
// 0x 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 
// 0x 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 
// 0x 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 05 
// 0x 83 80 80 80 00 01 00 01 06 9f 84 80 80 00 e6 80 80 80 00 7f 01 41 04 0b 7f 01 41 01 0b 7f 01 41 
// 0x 02 0b 7f 01 41 03 0b 7f 01 41 04 0b 7f 01 41 05 0b 7f 01 41 06 0b 7f 01 41 07 0b 7f 01 41 08 0b 
// 0x 7f 01 41 09 0b 7f 01 41 0a 0b 7f 01 41 0b 0b 7f 01 41 0c 0b 7f 01 41 0d 0b 7f 01 41 0e 0b 7f 01 
// 0x 41 2b 0b 7f 01 41 2e 0b 7f 01 41 2f 0b 7f 01 41 32 0b 7f 01 41 33 0b 7f 01 41 34 0b 7f 01 41 3c 
// 0x 0b 7f 01 41 3d 0b 7f 01 41 3e 0b 7f 01 41 c6 00 0b 7f 01 41 c7 00 0b 7f 01 41 c8 00 0b 7f 01 41 
// 0x c9 00 0b 7f 01 41 d0 00 0b 7f 01 41 d2 00 0b 7f 01 41 d3 00 0b 7f 01 41 d4 00 0b 7f 01 41 e3 00 
// 0x 0b 7f 01 41 e4 00 0b 7f 01 41 e5 00 0b 7f 01 41 e6 00 0b 7f 01 41 ee 00 0b 7f 01 41 ef 00 0b 7f 
// 0x 01 41 f0 00 0b 7f 01 41 f1 00 0b 7f 01 41 f2 00 0b 7f 01 41 f3 00 0b 7f 01 41 f6 00 0b 7f 01 41 
// 0x f7 00 0b 7f 01 41 f8 00 0b 7f 01 41 f9 00 0b 7f 01 41 fb 00 0b 7f 01 41 fb 00 0b 7f 01 41 fc 00 
// 0x 0b 7f 01 41 fd 00 0b 7f 01 41 fe 00 0b 7f 01 41 ff 00 0b 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 41 
// 0x 04 0b 7f 01 41 08 0b 7f 01 41 0c 0b 7f 01 41 10 0b 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 41 0c 0b 
// 0x 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 41 0c 0b 7f 01 41 10 0b 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 
// 0x 41 0c 0b 7f 01 41 10 0b 7f 01 41 14 0b 7f 01 41 18 0b 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 41 0c 
// 0x 0b 7f 01 41 10 0b 7f 01 41 14 0b 7f 01 41 18 0b 7f 01 41 1c 0b 7f 01 41 20 0b 7f 01 41 24 0b 7f 
// 0x 01 41 28 0b 7f 01 41 2c 0b 7f 01 41 30 0b 7f 01 41 04 0b 7f 01 41 08 0b 7f 01 41 0c 0b 7f 01 41 
// 0x 10 0b 7f 01 41 14 0b 7f 01 41 18 0b 7f 01 41 04 0b 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 
// 0x 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 7f 01 
// 0x 41 00 0b 7f 01 41 00 0b 7f 01 41 00 0b 07 ba 8a 80 80 00 e4 80 80 80 00 07 73 74 6f 72 65 33 32 
// 0x 00 00 06 73 74 6f 72 65 38 00 01 06 6c 6f 61 64 33 32 00 02 05 6c 6f 61 64 38 00 03 05 41 6c 6c 
// 0x 6f 63 00 04 0b 4e 65 77 4c 69 73 74 49 74 65 6d 00 05 07 4e 65 77 4c 69 73 74 00 06 0b 4e 65 77 
// 0x 44 69 63 74 49 74 65 6d 00 07 08 4e 65 77 54 6f 6b 65 6e 00 08 07 4e 65 77 4e 6f 64 65 00 09 08 
// 0x 4e 65 77 53 63 6f 70 65 00 0a 09 4e 65 77 53 74 72 69 6e 67 00 0b 06 73 74 72 4c 65 6e 00 0c 07 
// 0x 67 65 74 63 68 61 72 00 0d 07 73 65 74 63 68 61 72 00 0e 09 53 75 62 73 74 72 69 6e 67 00 0f 0a 
// 0x 73 74 72 43 6f 6d 70 61 72 65 00 10 08 73 74 72 63 6f 6d 70 31 00 11 08 73 74 72 63 6f 6d 70 32 
// 0x 00 12 08 73 74 72 63 6f 6d 70 33 00 13 08 73 74 72 63 6f 6d 70 34 00 14 08 73 74 72 63 6f 6d 70 
// 0x 35 00 15 08 73 74 72 63 6f 6d 70 36 00 16 08 73 74 72 63 6f 6d 70 37 00 17 08 73 74 72 63 6f 6d 
// 0x 70 38 00 18 07 6c 69 73 74 41 64 64 00 19 0a 44 69 63 74 53 65 61 72 63 68 00 1a 08 61 64 64 54 
// 0x 6f 6b 65 6e 00 1b 0c 70 72 6f 63 65 73 73 54 6f 6b 65 6e 00 1c 0c 69 73 57 68 69 74 65 73 70 61 
// 0x 63 65 00 1d 07 69 73 41 6c 70 68 61 00 1e 08 69 73 4e 75 6d 62 65 72 00 1f 0c 69 73 50 75 6e 63 
// 0x 74 75 61 74 6f 72 00 20 0e 69 73 4f 70 65 72 61 74 6f 72 43 68 61 72 00 21 04 6c 65 78 78 00 22 
// 0x 09 70 75 73 68 53 63 6f 70 65 00 23 08 70 6f 70 53 63 6f 70 65 00 24 13 4c 6f 6f 6b 75 70 46 75 
// 0x 6e 63 74 69 6f 6e 53 63 6f 70 65 00 25 0d 73 63 6f 70 65 52 65 67 69 73 74 65 72 00 26 0c 53 63 
// 0x 6f 70 65 52 65 73 6f 6c 76 65 00 27 04 6e 65 78 74 00 28 10 69 73 42 69 6e 61 72 79 4f 70 65 72 
// 0x 61 74 6f 72 00 29 0f 69 73 55 6e 61 72 79 4f 70 65 72 61 74 6f 72 00 2a 09 69 73 4c 69 74 65 72 
// 0x 61 6c 00 2b 0c 69 73 4e 61 74 69 76 65 54 79 70 65 00 2c 08 65 61 74 54 6f 6b 65 6e 00 2d 0e 50 
// 0x 61 72 73 65 46 75 6e 50 61 72 61 6d 73 00 2e 0d 50 61 72 73 65 46 75 6e 42 6c 6f 63 6b 00 2f 13 
// 0x 50 61 72 73 65 46 75 6e 44 65 63 6c 61 72 61 74 69 6f 6e 00 30 08 50 61 72 73 65 46 75 6e 00 31 
// 0x 0a 50 61 72 73 65 42 72 65 61 6b 00 32 0d 50 61 72 73 65 43 6f 6e 74 69 6e 75 65 00 33 0c 50 61 
// 0x 72 73 65 4c 69 74 65 72 61 6c 00 34 0f 50 61 72 73 65 43 61 6c 6c 50 61 72 61 6d 73 00 35 13 50 
// 0x 61 72 73 65 43 61 6c 6c 45 78 70 72 65 73 73 69 6f 6e 00 36 14 70 61 72 73 65 55 6e 61 72 79 45 
// 0x 78 70 72 65 73 73 69 6f 6e 00 37 0b 50 61 72 73 65 50 72 65 66 69 78 00 38 15 50 61 72 73 65 42 
// 0x 69 6e 61 72 79 45 78 70 72 65 73 73 69 6f 6e 00 39 0a 50 61 72 73 65 49 6e 66 69 78 00 3a 0f 50 
// 0x 61 72 73 65 45 78 70 72 65 73 73 69 6f 6e 00 3b 14 50 61 72 73 65 52 65 74 75 72 6e 53 74 61 74 
// 0x 65 6d 65 6e 74 00 3c 0c 50 61 72 73 65 49 66 42 6c 6f 63 6b 00 3d 10 50 61 72 73 65 49 66 53 74 
// 0x 61 74 65 6d 65 6e 74 00 3e 0e 50 61 72 73 65 4c 6f 6f 70 42 6c 6f 63 6b 00 3f 12 50 61 72 73 65 
// 0x 4c 6f 6f 70 53 74 61 74 65 6d 65 6e 74 00 40 10 50 61 72 73 65 44 65 63 6c 61 72 61 74 69 6f 6e 
// 0x 00 41 0e 50 61 72 73 65 53 74 61 74 65 6d 65 6e 74 00 42 05 70 61 72 73 65 00 43 08 73 74 72 54 
// 0x 6f 49 33 32 00 44 08 65 6d 69 74 42 79 74 65 00 45 07 65 6d 69 74 49 33 32 00 46 07 75 6c 65 62 
// 0x 6c 65 6e 00 47 08 65 6d 69 74 55 6c 65 62 00 48 0c 66 69 78 55 6c 65 62 47 75 65 73 73 00 49 08 
// 0x 65 6d 69 74 54 79 70 65 00 4a 0f 65 6d 69 74 54 79 70 65 53 65 63 74 69 6f 6e 00 4b 13 65 6d 69 
// 0x 74 46 75 6e 63 74 69 6f 6e 53 65 63 74 69 6f 6e 00 4c 11 65 6d 69 74 4d 65 6d 6f 72 79 53 65 63 
// 0x 74 69 6f 6e 00 4d 11 65 6d 69 74 47 6c 6f 62 61 6c 53 65 63 74 69 6f 6e 00 4e 0e 65 6d 69 74 41 
// 0x 73 73 69 67 6e 6d 65 6e 74 00 4f 0c 65 6d 69 74 4f 70 65 72 61 74 6f 72 00 50 09 65 6d 69 74 55 
// 0x 6e 61 72 79 00 51 0b 65 6d 69 74 4c 69 74 65 72 61 6c 00 52 08 65 6d 69 74 43 61 6c 6c 00 53 09 
// 0x 65 6d 69 74 42 6c 6f 63 6b 00 54 0a 65 6d 69 74 52 65 74 75 72 6e 00 55 06 65 6d 69 74 49 66 00 
// 0x 56 09 6c 6f 6f 70 4c 65 76 65 6c 00 57 08 65 6d 69 74 4c 6f 6f 70 00 58 09 65 6d 69 74 42 72 65 
// 0x 61 6b 00 59 0c 65 6d 69 74 43 6f 6e 74 69 6e 75 65 00 5a 08 65 6d 69 74 4e 6f 64 65 00 5b 0b 65 
// 0x 6d 69 74 46 75 6e 43 6f 64 65 00 5c 0f 65 6d 69 74 43 6f 64 65 53 65 63 74 69 6f 6e 00 5d 04 65 
// 0x 6d 69 74 00 5e 04 66 75 6e 5f 00 5f 07 65 6e 64 66 75 6e 5f 00 60 04 69 33 32 5f 00 61 04 6d 61 
// 0x 69 6e 00 62 06 6d 65 6d 6f 72 79 02 00 0a d1 c8 80 80 00 e3 80 80 80 00 09 00 20 00 20 01 36 00 
// 0x 00 0b 09 00 20 00 20 01 3a 00 00 0b 07 00 20 00 28 00 00 0b 07 00 20 00 2d 00 00 0b ab 80 80 80 
// 0x 00 01 01 7f 41 00 21 01 23 59 21 01 23 59 20 00 6a 24 59 23 59 23 00 6f 04 40 23 59 23 00 23 59 
// 0x 23 00 6f 6b 6a 24 59 0b 20 01 0f 0b 91 80 80 80 00 00 23 59 41 02 41 80 02 6b 10 00 23 3c 10 04 
// 0x 0f 0b 91 80 80 80 00 00 23 59 41 03 41 80 02 6b 10 00 23 39 10 04 0f 0b 91 80 80 80 00 00 23 59 
// 0x 41 04 41 80 02 6b 10 00 23 40 10 04 0f 0b 91 80 80 80 00 00 23 59 41 05 41 80 02 6b 10 00 23 46 
// 0x 10 04 0f 0b a4 80 80 80 00 01 01 7f 23 59 41 06 41 80 02 6b 10 00 41 00 21 00 23 52 10 04 21 00 
// 0x 20 00 23 4c 6a 23 5d 10 00 20 00 0f 0b a4 80 80 80 00 01 01 7f 23 59 41 07 41 80 02 6b 10 00 41 
// 0x 00 21 00 23 58 10 04 21 00 20 00 23 56 6a 10 06 10 00 20 00 0f 0b a7 80 80 80 00 01 01 7f 23 59 
// 0x 41 01 41 80 02 6b 10 00 41 00 21 01 23 35 20 00 6a 10 04 21 01 20 01 23 34 6a 20 00 10 00 20 01 
// 0x 0f 0b 8a 80 80 80 00 00 20 00 23 34 6a 10 02 0f 0b 8d 80 80 80 00 00 20 00 23 35 20 01 6a 6a 10 
// 0x 03 0f 0b 8e 80 80 80 00 00 20 00 23 35 20 01 6a 6a 20 02 10 01 0b df 80 80 80 00 01 01 7f 20 01 
// 0x 20 00 10 0c 4e 04 40 41 00 21 02 0b 20 01 20 02 6a 20 00 10 0c 4e 04 40 20 00 10 0c 20 01 6b 21 
// 0x 02 0b 41 00 21 03 20 02 10 0b 21 03 02 40 03 40 20 02 41 00 46 04 40 0c 02 00 0b 20 02 41 01 6b 
// 0x 21 02 20 03 20 02 20 00 20 01 20 02 6a 10 0d 10 0e 0c 00 00 0b 0b 20 03 0f 0b e6 80 80 80 00 03 
// 0x 01 7f 01 7f 01 7f 41 00 21 02 20 00 10 0c 21 02 41 00 21 03 41 00 21 03 41 00 21 04 41 01 21 04 
// 0x 20 02 20 01 10 0c 46 04 40 02 40 03 40 20 00 20 03 10 0d 20 01 20 03 10 0d 47 04 40 41 00 21 04 
// 0x 0c 02 00 0b 20 03 20 02 4e 04 40 0c 02 00 0b 20 03 41 01 6a 21 03 0c 00 00 0b 0b 05 41 00 21 04 
// 0x 0b 20 04 0f 0b ae 80 80 80 00 01 01 7f 41 00 21 02 41 01 21 02 20 00 10 0c 41 01 47 04 40 41 00 
// 0x 21 02 05 20 00 41 00 10 0d 20 01 47 04 40 41 00 21 02 0b 0b 20 02 0f 0b be 80 80 80 00 01 01 7f 
// 0x 41 00 21 03 41 01 21 03 20 00 10 0c 41 02 47 04 40 41 00 21 03 05 20 00 41 00 10 0d 20 01 47 04 
// 0x 40 41 00 21 03 0b 20 00 41 01 10 0d 20 02 47 04 40 41 00 21 03 0b 0b 20 03 0f 0b ce 80 80 80 00 
// 0x 01 01 7f 41 00 21 04 41 01 21 04 20 00 10 0c 41 03 47 04 40 41 00 21 04 05 20 00 41 00 10 0d 20 
// 0x 01 47 04 40 41 00 21 04 0b 20 00 41 01 10 0d 20 02 47 04 40 41 00 21 04 0b 20 00 41 02 10 0d 20 
// 0x 03 47 04 40 41 00 21 04 0b 0b 20 04 0f 0b de 80 80 80 00 01 01 7f 41 00 21 05 41 01 21 05 20 00 
// 0x 10 0c 41 04 47 04 40 41 00 21 05 05 20 00 41 00 10 0d 20 01 47 04 40 41 00 21 05 0b 20 00 41 01 
// 0x 10 0d 20 02 47 04 40 41 00 21 05 0b 20 00 41 02 10 0d 20 03 47 04 40 41 00 21 05 0b 20 00 41 03 
// 0x 10 0d 20 04 47 04 40 41 00 21 05 0b 0b 20 05 0f 0b ee 80 80 80 00 01 01 7f 41 00 21 06 41 01 21 
// 0x 06 20 00 10 0c 41 05 47 04 40 41 00 21 06 05 20 00 41 00 10 0d 20 01 47 04 40 41 00 21 06 0b 20 
// 0x 00 41 01 10 0d 20 02 47 04 40 41 00 21 06 0b 20 00 41 02 10 0d 20 03 47 04 40 41 00 21 06 0b 20 
// 0x 00 41 03 10 0d 20 04 47 04 40 41 00 21 06 0b 20 00 41 04 10 0d 20 05 47 04 40 41 00 21 06 0b 0b 
// 0x 20 06 0f 0b fe 80 80 80 00 01 01 7f 41 00 21 07 41 01 21 07 20 00 10 0c 41 06 47 04 40 41 00 21 
// 0x 07 05 20 00 41 00 10 0d 20 01 47 04 40 41 00 21 07 0b 20 00 41 01 10 0d 20 02 47 04 40 41 00 21 
// 0x 07 0b 20 00 41 02 10 0d 20 03 47 04 40 41 00 21 07 0b 20 00 41 03 10 0d 20 04 47 04 40 41 00 21 
// 0x 07 0b 20 00 41 04 10 0d 20 05 47 04 40 41 00 21 07 0b 20 00 41 05 10 0d 20 06 47 04 40 41 00 21 
// 0x 07 0b 0b 20 07 0f 0b 8e 81 80 80 00 01 01 7f 41 00 21 08 41 01 21 08 20 00 10 0c 41 07 47 04 40 
// 0x 41 00 21 08 05 20 00 41 00 10 0d 20 01 47 04 40 41 00 21 08 0b 20 00 41 01 10 0d 20 02 47 04 40 
// 0x 41 00 21 08 0b 20 00 41 02 10 0d 20 03 47 04 40 41 00 21 08 0b 20 00 41 03 10 0d 20 04 47 04 40 
// 0x 41 00 21 08 0b 20 00 41 04 10 0d 20 05 47 04 40 41 00 21 08 0b 20 00 41 05 10 0d 20 06 47 04 40 
// 0x 41 00 21 08 0b 20 00 41 06 10 0d 20 07 47 04 40 41 00 21 08 0b 0b 20 08 0f 0b 9e 81 80 80 00 01 
// 0x 01 7f 41 00 21 09 41 01 21 09 20 00 10 0c 41 07 47 04 40 41 00 21 09 05 20 00 41 00 10 0d 20 01 
// 0x 47 04 40 41 00 21 09 0b 20 00 41 01 10 0d 20 02 47 04 40 41 00 21 09 0b 20 00 41 02 10 0d 20 03 
// 0x 47 04 40 41 00 21 09 0b 20 00 41 03 10 0d 20 04 47 04 40 41 00 21 09 0b 20 00 41 04 10 0d 20 05 
// 0x 47 04 40 41 00 21 09 0b 20 00 41 05 10 0d 20 06 47 04 40 41 00 21 09 0b 20 00 41 06 10 0d 20 07 
// 0x 47 04 40 41 00 21 09 0b 20 00 41 07 10 0d 20 08 47 04 40 41 00 21 09 0b 0b 20 09 0f 0b bf 80 80 
// 0x 80 00 00 20 00 23 36 6a 10 02 45 04 40 20 00 23 36 6a 20 01 10 00 05 20 00 23 37 6a 10 02 23 3a 
// 0x 6a 20 01 10 00 0b 20 00 23 37 6a 20 01 10 00 20 00 23 38 6a 20 00 23 38 6a 10 02 41 01 6a 10 00 
// 0x 0b d3 80 80 80 00 02 01 7f 01 7f 41 00 21 02 20 00 23 36 6a 10 02 21 02 41 00 21 03 41 00 21 03 
// 0x 02 40 03 40 20 02 45 04 40 0c 02 00 0b 20 02 23 3e 6a 10 02 20 01 10 10 04 40 20 02 23 3f 6a 10 
// 0x 02 21 03 0c 02 00 0b 20 02 23 3a 6a 10 02 21 02 0c 00 00 0b 0b 20 03 0f 0b c0 80 80 80 00 01 01 
// 0x 7f 41 00 21 04 10 08 21 04 20 04 23 42 6a 20 00 10 00 20 04 23 43 6a 20 01 10 00 20 04 23 44 6a 
// 0x 20 02 10 00 20 04 23 45 6a 20 03 10 00 23 5a 45 04 40 10 06 24 5a 0b 23 5a 20 04 10 19 0b ed 84 
// 0x 80 80 00 01 01 7f 41 00 21 03 23 0f 21 03 20 00 41 28 10 11 04 40 23 12 21 03 0b 20 00 41 2c 10 
// 0x 11 04 40 23 13 21 03 0b 20 00 41 29 10 11 04 40 23 14 21 03 0b 20 00 41 e6 00 41 f5 00 41 ee 00 
// 0x 10 13 04 40 23 15 21 03 0b 20 00 41 f2 00 41 e5 00 41 f4 00 41 f5 00 41 f2 00 41 ee 00 10 16 04 
// 0x 40 23 16 21 03 0b 20 00 41 e5 00 41 ee 00 41 e4 00 41 e6 00 41 f5 00 41 ee 00 10 16 04 40 23 17 
// 0x 21 03 0b 20 00 41 ec 00 41 ef 00 41 ef 00 41 f0 00 10 14 04 40 23 18 21 03 0b 20 00 41 e3 00 41 
// 0x ef 00 41 ee 00 41 f4 00 41 e9 00 41 ee 00 41 f5 00 41 e5 00 10 18 04 40 23 19 21 03 0b 20 00 41 
// 0x e2 00 41 f2 00 41 e5 00 41 e1 00 41 eb 00 10 15 04 40 23 1a 21 03 0b 20 00 41 e5 00 41 ee 00 41 
// 0x e4 00 41 ec 00 41 ef 00 41 ef 00 41 f0 00 10 17 04 40 23 1b 21 03 0b 20 00 41 e9 00 41 e6 00 10 
// 0x 12 04 40 23 1c 21 03 0b 20 00 41 e5 00 41 ec 00 41 f3 00 41 e5 00 10 14 04 40 23 1e 21 03 0b 20 
// 0x 00 41 e5 00 41 ee 00 41 e4 00 41 e9 00 41 e6 00 10 15 04 40 23 1f 21 03 0b 20 00 41 e9 00 41 33 
// 0x 41 32 10 13 04 40 23 33 21 03 0b 20 00 41 e9 00 41 36 41 34 10 13 04 40 23 32 21 03 0b 20 00 41 
// 0x e6 00 41 33 41 32 10 13 04 40 23 31 21 03 0b 20 00 41 e6 00 41 36 41 34 10 13 04 40 23 30 21 03 
// 0x 0b 20 00 41 3a 41 3d 10 12 04 40 23 21 21 03 0b 20 00 41 ef 00 41 f2 00 10 12 04 40 23 22 21 03 
// 0x 0b 20 00 41 e1 00 41 ee 00 41 e4 00 10 13 04 40 23 23 21 03 0b 20 00 41 3d 10 11 04 40 23 24 21 
// 0x 03 0b 20 00 41 3c 41 3e 10 12 04 40 23 25 21 03 0b 20 00 41 3c 10 11 04 40 23 26 21 03 0b 20 00 
// 0x 41 3c 41 3d 10 12 04 40 23 27 21 03 0b 20 00 41 3e 10 11 04 40 23 28 21 03 0b 20 00 41 3e 41 3d 
// 0x 10 12 04 40 23 29 21 03 0b 20 00 41 2b 10 11 04 40 23 2a 21 03 0b 20 00 41 2d 10 11 04 40 23 2b 
// 0x 21 03 0b 20 00 41 2a 10 11 04 40 23 2c 21 03 0b 20 00 41 2f 10 11 04 40 23 2d 21 03 0b 20 00 41 
// 0x ed 00 41 ef 00 41 e4 00 10 13 04 40 23 2e 21 03 0b 20 00 41 ee 00 41 ef 00 41 f4 00 10 13 04 40 
// 0x 23 2f 21 03 0b 20 03 20 00 20 01 20 02 10 1b 0b 9a 80 80 80 00 00 20 00 41 00 46 20 00 41 09 46 
// 0x 20 00 41 0d 46 20 00 41 20 46 72 72 72 0f 0b a5 80 80 80 00 00 20 00 41 e1 00 4e 20 00 41 fa 00 
// 0x 4c 71 20 00 41 e1 00 4e 20 00 41 fa 00 4c 71 20 00 41 df 00 46 72 72 0f 0b 8e 80 80 80 00 00 20 
// 0x 00 41 30 4e 20 00 41 39 4c 71 0f 0b 94 80 80 80 00 00 20 00 41 28 46 20 00 41 29 46 20 00 41 2c 
// 0x 46 72 72 0f 0b b2 80 80 80 00 00 20 00 41 3d 46 20 00 41 2b 46 20 00 41 2d 46 20 00 41 2f 46 20 
// 0x 00 41 3c 46 20 00 41 3e 46 20 00 41 2a 46 20 00 41 3a 46 72 72 72 72 72 72 72 0f 0b 9c 84 80 80 
// 0x 00 07 01 7f 01 7f 01 7f 01 7f 01 7f 01 7f 01 7f 41 00 21 01 41 00 41 01 6b 21 01 41 00 21 02 41 
// 0x 01 21 02 41 00 21 03 41 00 21 03 41 00 21 04 20 00 10 0c 21 04 41 00 21 05 41 00 21 05 41 00 21 
// 0x 06 41 00 21 06 41 00 21 07 41 00 21 07 02 40 03 40 20 01 41 01 6a 21 01 20 03 41 01 6a 21 03 20 
// 0x 00 20 01 10 0d 21 05 20 05 10 1d 04 40 0c 01 00 0b 20 05 41 0a 46 04 40 20 02 41 01 6a 21 02 41 
// 0x 00 21 03 0c 01 00 0b 20 05 10 1e 04 40 20 01 21 06 02 40 03 40 20 05 10 1e 45 20 05 10 1f 45 71 
// 0x 04 40 20 01 41 01 6b 21 01 20 03 41 01 6b 21 03 0c 02 00 0b 20 01 41 01 6a 21 01 20 03 41 01 6a 
// 0x 21 03 20 00 20 01 10 0d 21 05 0c 00 00 0b 0b 20 00 20 06 20 01 20 06 6b 41 01 6a 10 0f 21 07 20 
// 0x 07 20 02 20 03 10 1c 0c 01 00 0b 20 05 10 1f 20 05 41 2d 46 20 00 20 01 41 01 6a 10 0d 10 1f 71 
// 0x 72 04 40 20 01 21 06 02 40 03 40 20 05 10 1f 45 20 05 41 2d 47 71 04 40 20 01 41 01 6b 21 01 20 
// 0x 03 41 01 6b 21 03 0c 02 00 0b 20 01 41 01 6a 21 01 20 03 41 01 6a 21 03 20 00 20 01 10 0d 21 05 
// 0x 0c 00 00 0b 0b 20 00 20 06 20 01 20 06 6b 41 01 6a 10 0f 21 07 23 11 20 07 20 02 20 03 10 1b 0c 
// 0x 01 00 0b 20 05 41 2f 46 20 00 20 01 41 01 6a 10 0d 41 2f 46 71 04 40 02 40 03 40 20 05 41 0a 46 
// 0x 04 40 41 00 21 03 20 02 41 01 6a 21 02 0c 02 00 0b 20 01 41 01 6a 21 01 20 03 41 01 6a 21 03 20 
// 0x 00 20 01 10 0d 21 05 0c 00 00 0b 0b 0c 01 00 0b 20 05 10 20 04 40 20 00 20 01 41 01 10 0f 21 07 
// 0x 20 07 20 02 20 03 10 1c 0c 01 00 0b 20 05 10 21 04 40 20 00 20 01 41 01 6a 10 0d 10 21 04 40 20 
// 0x 00 20 01 41 02 10 0f 21 07 20 01 41 01 6a 21 01 20 03 41 01 6a 21 03 05 20 00 20 01 41 01 10 0f 
// 0x 21 07 0b 20 07 20 02 20 03 10 1c 0b 20 01 20 04 4e 04 40 0c 02 00 0b 0c 00 00 0b 0b 0b c1 80 80 
// 0x 80 00 01 01 7f 41 00 21 01 10 0a 21 01 20 01 23 53 6a 20 00 10 00 23 5d 04 40 20 01 23 54 6a 23 
// 0x 5d 23 54 6a 10 02 41 01 6a 10 00 20 01 23 55 6a 23 5d 10 00 0b 20 00 23 4c 6a 20 01 10 00 20 01 
// 0x 24 5d 0b 90 80 80 80 00 00 23 5d 04 40 23 5d 23 55 6a 10 02 24 5d 0b 0b bc 80 80 80 00 01 01 7f 
// 0x 41 00 21 01 20 00 21 01 02 40 03 40 20 01 45 04 40 0c 02 00 0b 20 01 23 53 6a 10 02 23 48 6a 10 
// 0x 02 04 40 0c 02 00 0b 20 01 23 55 6a 10 02 21 01 0c 00 00 0b 0b 20 01 0f 0b fa 80 80 80 00 04 01 
// 0x 7f 01 7f 01 7f 01 7f 41 00 21 03 10 07 21 03 41 00 21 04 20 02 23 48 6a 10 02 21 04 41 00 21 05 
// 0x 41 00 21 05 20 03 23 3e 6a 20 01 10 00 20 03 23 3f 6a 20 02 10 00 20 00 23 56 6a 10 02 20 03 10 
// 0x 19 20 04 23 0c 46 20 04 23 0d 46 72 04 40 20 00 10 25 21 05 41 00 21 06 20 05 23 57 6a 10 02 21 
// 0x 06 20 02 23 4a 6a 20 06 10 00 20 05 23 57 6a 20 06 41 01 6a 10 00 0b 0b c9 80 80 80 00 02 01 7f 
// 0x 01 7f 41 00 21 02 41 00 21 02 41 00 21 03 20 00 21 03 02 40 03 40 20 03 45 04 40 0c 02 00 0b 20 
// 0x 03 23 56 6a 10 02 20 01 10 1a 21 02 20 02 04 40 0c 02 00 0b 20 03 23 55 6a 10 02 21 03 0c 00 00 
// 0x 0b 0b 20 02 0f 0b 8b 80 80 80 00 00 23 5c 23 41 6a 10 02 24 5c 0b 8d 80 80 80 00 00 20 00 23 42 
// 0x 6a 10 02 23 21 46 0f 0b 9d 80 80 80 00 01 01 7f 41 00 21 01 20 00 23 42 6a 10 02 21 01 20 01 23 
// 0x 2b 46 20 01 23 2f 46 72 0f 0b 9d 80 80 80 00 01 01 7f 41 00 21 01 20 00 23 42 6a 10 02 21 01 20 
// 0x 01 23 11 46 20 01 23 0f 46 72 0f 0b a9 80 80 80 00 01 01 7f 41 00 21 01 20 00 23 42 6a 10 02 21 
// 0x 01 20 01 23 33 46 20 01 23 32 46 20 01 23 31 46 20 01 23 30 46 72 72 72 0f 0b 92 80 80 80 00 00 
// 0x 23 5c 23 42 6a 10 02 20 00 46 04 40 10 28 05 0b 0b 88 81 80 80 00 03 01 7f 01 7f 01 7f 41 00 21 
// 0x 00 10 06 21 00 41 00 21 01 41 00 21 01 41 00 21 02 41 00 21 02 23 12 10 2d 02 40 03 40 23 5c 23 
// 0x 42 6a 10 02 21 01 20 01 23 14 46 04 40 0c 02 00 0b 10 28 10 09 21 02 20 02 23 48 6a 23 0d 10 00 
// 0x 20 02 23 49 6a 20 01 10 00 20 02 23 4b 6a 23 5c 23 43 6a 10 02 10 00 20 00 20 02 10 19 10 28 23 
// 0x 5c 23 42 6a 10 02 23 13 47 04 40 0c 02 00 0b 10 28 0c 00 00 0b 0b 23 14 10 2d 20 00 0f 0b f3 80 
// 0x 80 80 00 03 01 7f 01 7f 01 7f 41 00 21 00 10 09 21 00 41 00 21 01 10 06 21 01 41 00 21 02 41 00 
// 0x 21 02 20 00 23 48 6a 23 02 10 00 20 00 23 50 6a 20 01 10 00 20 00 23 4c 6a 23 5d 10 00 02 40 03 
// 0x 40 23 5c 45 04 40 0c 02 00 0b 23 5c 23 42 6a 10 02 23 17 46 04 40 0c 02 00 0b 10 42 21 02 20 02 
// 0x 45 04 40 0c 02 00 0b 20 01 20 02 10 19 0c 00 00 0b 0b 20 00 0f 0b c8 81 80 80 00 05 01 7f 01 7f 
// 0x 01 7f 01 7f 01 7f 41 00 21 02 10 09 21 02 41 00 21 03 10 06 21 03 41 00 21 04 41 00 21 04 41 00 
// 0x 21 05 41 00 21 05 41 00 21 06 41 00 21 06 20 02 23 48 6a 23 0b 10 00 20 02 23 4a 6a 23 5b 10 00 
// 0x 23 5b 41 01 6a 24 5b 20 02 23 49 6a 20 00 10 00 20 02 23 4b 6a 20 01 10 00 20 02 23 50 6a 20 03 
// 0x 10 00 23 5d 20 01 20 02 10 26 10 2e 21 04 20 02 23 51 6a 20 04 10 00 20 02 10 23 20 04 23 36 6a 
// 0x 10 02 21 06 02 40 03 40 20 06 45 04 40 0c 02 00 0b 20 06 23 4b 6a 10 02 21 05 23 5d 20 05 20 06 
// 0x 10 26 20 06 23 3a 6a 10 02 21 06 0c 00 00 0b 0b 20 02 23 4d 6a 10 2f 10 00 10 24 23 17 10 2d 20 
// 0x 02 0f 0b ba 80 80 80 00 02 01 7f 01 7f 41 00 21 00 41 00 21 00 41 00 21 01 41 00 21 01 23 5c 10 
// 0x 2c 04 40 23 5c 23 42 6a 10 02 21 00 10 28 0b 23 5c 23 43 6a 10 02 21 01 10 28 20 00 20 01 10 30 
// 0x 0f 0b 9c 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 20 00 23 48 6a 23 09 10 00 23 1a 10 2d 20 
// 0x 00 0f 0b 9c 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 20 00 23 48 6a 23 0a 10 00 23 19 10 2d 
// 0x 20 00 0f 0b b6 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 20 00 23 48 6a 23 0e 10 00 20 00 23 
// 0x 4b 6a 23 5c 23 43 6a 10 02 10 00 20 00 23 49 6a 23 5c 23 42 6a 10 02 10 00 10 28 20 00 0f 0b cc 
// 0x 80 80 80 00 01 01 7f 41 00 21 00 10 06 21 00 23 12 10 2d 02 40 03 40 23 5c 23 42 6a 10 02 23 14 
// 0x 46 04 40 0c 02 00 0b 20 00 23 20 10 3b 10 19 23 5c 23 42 6a 10 02 23 13 47 04 40 0c 02 00 0b 23 
// 0x 13 10 2d 0c 00 00 0b 0b 23 14 10 2d 20 00 0f 0b aa 80 80 80 00 01 01 7f 41 00 21 01 10 09 21 01 
// 0x 20 01 23 48 6a 23 05 10 00 20 01 23 4d 6a 20 00 10 00 20 01 23 51 6a 10 35 10 00 20 01 0f 0b c1 
// 0x 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 20 00 23 48 6a 23 04 10 00 20 00 23 49 6a 23 5c 23 
// 0x 42 6a 10 02 10 00 20 00 23 4b 6a 23 5c 23 43 6a 10 02 10 00 10 28 20 00 23 4e 6a 23 2a 10 3b 10 
// 0x 00 20 00 0f 0b c0 80 80 80 00 01 01 7f 41 00 21 00 41 00 21 00 23 5c 10 2b 04 40 10 34 21 00 05 
// 0x 23 5c 23 42 6a 10 02 23 12 46 04 40 10 28 23 20 10 3b 21 00 23 14 10 2d 05 23 5c 10 2a 04 40 10 
// 0x 37 21 00 0b 0b 0b 20 00 0f 0b ea 80 80 80 00 02 01 7f 01 7f 41 00 21 02 41 00 21 02 41 00 21 03 
// 0x 23 5c 23 42 6a 10 02 21 03 20 00 20 03 4a 04 40 20 01 21 02 05 10 09 21 02 20 02 23 48 6a 23 03 
// 0x 10 00 20 02 23 49 6a 23 5c 23 42 6a 10 02 10 00 20 02 23 4b 6a 23 5c 23 43 6a 10 02 10 00 20 02 
// 0x 23 4d 6a 20 01 10 00 10 28 20 02 23 4e 6a 20 03 10 3b 10 00 0b 20 02 0f 0b b7 80 80 80 00 01 01 
// 0x 7f 41 00 21 02 41 00 21 02 23 5c 10 29 04 40 20 00 20 01 10 39 21 02 05 23 5c 23 42 6a 10 02 23 
// 0x 12 46 04 40 20 01 10 36 21 02 05 20 01 21 02 0b 0b 20 02 0f 0b f0 80 80 80 00 02 01 7f 01 7f 41 
// 0x 00 21 01 41 00 21 01 41 00 21 02 41 00 21 02 23 5c 23 42 6a 10 02 23 1a 46 04 40 10 32 21 01 05 
// 0x 23 5c 23 42 6a 10 02 23 19 46 04 40 10 33 21 01 05 10 38 21 01 02 40 03 40 23 5c 45 04 40 0c 02 
// 0x 00 0b 20 00 20 01 10 3a 21 02 20 02 41 00 46 20 02 20 01 46 72 04 40 0c 02 00 0b 20 02 21 01 0c 
// 0x 00 00 0b 0b 0b 0b 20 01 0f 0b f3 80 80 80 00 02 01 7f 01 7f 41 00 21 00 10 09 21 00 41 00 21 01 
// 0x 41 00 21 01 23 16 10 2d 20 00 23 48 6a 23 06 10 00 20 00 23 4d 6a 23 20 10 3b 10 00 23 5d 21 01 
// 0x 02 40 03 40 20 01 45 04 40 0c 02 00 0b 20 01 23 53 6a 10 02 23 48 6a 10 02 23 0b 46 04 40 0c 02 
// 0x 00 0b 20 01 23 55 6a 10 02 21 01 0c 00 00 0b 0b 20 01 23 53 6a 10 02 23 4d 6a 20 00 10 00 20 00 
// 0x 0f 0b 83 81 80 80 00 03 01 7f 01 7f 01 7f 41 00 21 00 10 09 21 00 41 00 21 01 10 06 21 01 41 00 
// 0x 21 02 41 00 21 02 20 00 23 48 6a 23 02 10 00 20 00 23 50 6a 20 01 10 00 20 00 23 4c 6a 23 5d 10 
// 0x 00 02 40 03 40 23 5c 45 04 40 0c 02 00 0b 23 5c 23 42 6a 10 02 23 1e 46 04 40 0c 02 00 0b 23 5c 
// 0x 23 42 6a 10 02 23 1f 46 04 40 0c 02 00 0b 10 42 21 02 20 02 45 04 40 0c 02 00 0b 20 01 20 02 10 
// 0x 19 0c 00 00 0b 0b 20 00 0f 0b de 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 23 1c 10 2d 20 00 
// 0x 23 48 6a 23 07 10 00 20 00 23 4f 6a 23 20 10 3b 10 00 23 1d 10 2d 20 00 10 23 20 00 23 4d 6a 10 
// 0x 3d 10 00 10 24 23 5c 23 42 6a 10 02 23 1e 46 04 40 23 1e 10 2d 20 00 10 23 20 00 23 4e 6a 10 3d 
// 0x 10 00 10 24 0b 23 1f 10 2d 20 00 0f 0b f3 80 80 80 00 03 01 7f 01 7f 01 7f 41 00 21 00 10 09 21 
// 0x 00 41 00 21 01 10 06 21 01 41 00 21 02 41 00 21 02 20 00 23 48 6a 23 02 10 00 20 00 23 50 6a 20 
// 0x 01 10 00 20 00 23 4c 6a 23 5d 10 00 02 40 03 40 23 5c 45 04 40 0c 02 00 0b 23 5c 23 42 6a 10 02 
// 0x 23 1b 46 04 40 0c 02 00 0b 10 42 21 02 20 02 45 04 40 0c 02 00 0b 20 01 20 02 10 19 0c 00 00 0b 
// 0x 0b 20 00 0f 0b af 80 80 80 00 01 01 7f 41 00 21 00 10 09 21 00 23 18 10 2d 20 00 23 48 6a 23 08 
// 0x 10 00 20 00 10 23 20 00 23 4d 6a 10 3f 10 00 10 24 23 1b 10 2d 20 00 0f 0b a6 81 80 80 00 05 01 
// 0x 7f 01 7f 01 7f 01 7f 01 7f 41 00 21 00 23 5c 23 42 6a 10 02 21 00 10 28 41 00 21 01 23 5c 23 43 
// 0x 6a 10 02 21 01 10 28 41 00 21 02 10 09 21 02 20 02 23 48 6a 23 0c 10 00 20 02 23 49 6a 20 00 10 
// 0x 00 20 02 23 4b 6a 20 01 10 00 23 5d 20 01 20 02 10 26 23 21 10 2d 20 02 23 4e 6a 23 20 10 3b 10 
// 0x 00 23 5d 23 55 6a 10 02 04 40 41 00 21 03 23 5d 10 25 23 53 6a 10 02 21 03 41 00 21 04 20 03 23 
// 0x 50 6a 10 02 21 04 20 04 45 04 40 10 06 21 04 20 03 23 50 6a 20 04 10 00 0b 20 04 20 02 10 19 0b 
// 0x 20 02 0f 0b ed 80 80 80 00 01 01 7f 41 00 21 00 41 00 21 00 23 5c 23 42 6a 10 02 23 15 46 04 40 
// 0x 23 15 10 2d 10 31 21 00 05 23 5c 10 2c 04 40 10 41 21 00 05 23 5c 23 42 6a 10 02 23 16 46 04 40 
// 0x 10 3c 21 00 05 23 5c 23 42 6a 10 02 23 1c 46 04 40 10 3e 21 00 05 23 5c 23 42 6a 10 02 23 18 46 
// 0x 04 40 10 40 21 00 05 23 20 10 3b 21 00 0b 0b 0b 0b 0b 20 00 0f 0b e2 80 80 80 00 02 01 7f 01 7f 
// 0x 10 09 24 5f 23 5a 23 36 6a 10 02 24 5c 23 5f 23 48 6a 23 01 10 00 23 5f 10 23 23 5d 24 5e 41 00 
// 0x 21 00 41 00 21 00 41 00 21 01 10 06 21 01 23 5f 23 50 6a 20 01 10 00 02 40 03 40 23 5c 45 04 40 
// 0x 0c 02 00 0b 10 42 21 00 20 00 45 04 40 0c 02 00 0b 20 01 20 00 10 19 0c 00 00 0b 0b 0b 89 82 80 
// 0x 80 00 05 01 7f 01 7f 01 7f 01 7f 01 7f 41 00 21 01 41 00 21 01 41 00 21 02 41 00 21 02 41 00 21 
// 0x 03 20 00 10 0c 21 03 41 00 21 04 41 00 21 04 41 00 21 05 41 00 21 05 20 03 41 03 4e 04 40 20 00 
// 0x 41 00 10 0d 41 30 46 20 00 41 01 10 0d 41 f8 00 46 71 04 40 41 01 21 01 0b 0b 20 01 04 40 41 02 
// 0x 21 04 02 40 03 40 20 04 20 03 4e 04 40 0c 02 00 0b 20 02 41 10 6c 21 02 20 00 20 04 10 0d 21 05 
// 0x 20 05 41 30 4e 20 05 41 39 4c 71 04 40 20 02 20 05 41 30 6b 6a 21 02 05 20 05 41 e1 00 4e 20 05 
// 0x 41 e6 00 4c 71 04 40 20 02 20 05 41 e1 00 6b 41 0a 6a 6a 21 02 0b 0b 20 04 41 01 6a 21 04 0c 00 
// 0x 00 0b 0b 05 02 40 03 40 20 04 20 03 4e 04 40 0c 02 00 0b 20 02 41 0a 6c 21 02 20 00 20 04 10 0d 
// 0x 21 05 20 05 41 30 4e 20 05 41 39 4c 71 04 40 20 02 20 05 41 30 6b 6a 21 02 0b 20 04 41 01 6a 21 
// 0x 04 0c 00 00 0b 0b 0b 20 02 0f 0b 8f 80 80 80 00 00 23 61 20 00 10 01 23 61 41 01 6a 24 61 0b 8f 
// 0x 80 80 80 00 00 23 61 20 00 10 00 23 61 41 04 6a 24 61 0b d1 80 80 80 00 01 01 7f 41 00 21 01 41 
// 0x 00 21 01 20 00 41 ff 00 4c 04 40 41 01 21 01 05 20 00 41 ff ff 00 4c 04 40 41 02 21 01 05 20 00 
// 0x 41 ff ff ff 00 4c 04 40 41 03 21 01 05 20 00 41 ff ff ff ff 00 4c 04 40 41 04 21 01 05 41 05 21 
// 0x 01 0b 0b 0b 0b 20 01 0f 0b af 80 80 80 00 00 02 40 03 40 20 00 41 80 01 48 04 40 0c 02 00 0b 41 
// 0x 80 01 20 00 41 80 01 6f 6a 10 45 20 00 41 80 01 6d 21 00 0c 00 00 0b 0b 20 00 10 45 0b ba 80 80 
// 0x 80 00 01 01 7f 41 00 21 02 23 61 21 02 20 01 41 00 4a 04 40 02 40 03 40 20 02 41 01 6b 21 02 20 
// 0x 02 20 00 48 04 40 0c 02 00 0b 20 02 20 01 6a 20 02 10 03 10 01 0c 00 00 0b 0b 0b 0b f3 80 80 80 
// 0x 00 03 01 7f 01 7f 01 7f 41 00 21 01 20 00 23 51 6a 10 02 21 01 41 e0 00 10 45 20 01 23 38 6a 10 
// 0x 02 10 48 41 00 21 02 20 01 23 36 6a 10 02 21 02 02 40 03 40 20 02 45 04 40 0c 02 00 0b 20 02 23 
// 0x 49 6a 10 02 10 45 20 02 23 47 6a 10 02 21 02 0c 00 00 0b 0b 41 00 21 03 20 00 23 49 6a 10 02 21 
// 0x 03 20 03 04 40 41 01 10 45 20 03 10 45 05 41 00 10 45 0b 0b dd 81 80 80 00 07 01 7f 01 7f 01 7f 
// 0x 01 7f 01 7f 01 7f 01 7f 41 00 21 00 23 5f 23 50 6a 10 02 21 00 41 00 21 01 23 61 21 01 20 00 04 
// 0x 40 20 00 23 38 6a 10 02 04 40 41 01 10 45 41 00 10 45 41 00 21 02 23 61 21 02 41 00 10 45 41 00 
// 0x 21 03 41 00 21 03 41 00 21 04 20 00 23 36 6a 10 02 21 04 02 40 03 40 20 04 23 48 6a 10 02 23 0b 
// 0x 46 04 40 20 04 10 4a 20 03 41 01 6a 21 03 23 63 41 01 6a 24 63 0b 20 04 23 47 6a 10 02 21 04 20 
// 0x 04 45 04 40 0c 02 00 0b 0c 00 00 0b 0b 41 00 21 05 23 61 20 02 6b 21 05 41 00 21 06 20 03 10 47 
// 0x 20 05 10 47 41 02 6b 6a 21 06 20 02 20 06 10 49 20 02 41 01 6b 24 61 20 05 10 48 20 03 10 48 23 
// 0x 61 20 05 41 01 6b 6a 24 61 0b 0b 23 63 45 04 40 20 01 24 61 0b 0b fa 80 80 80 00 04 01 7f 01 7f 
// 0x 01 7f 01 7f 23 63 04 40 41 03 10 45 41 00 10 45 41 00 21 00 23 61 21 00 23 63 10 48 41 00 21 01 
// 0x 41 00 21 01 02 40 03 40 20 01 23 63 4e 04 40 0c 02 00 0b 20 01 10 48 20 01 41 01 6a 21 01 0c 00 
// 0x 00 0b 0b 41 00 21 02 23 61 20 00 6b 21 02 41 00 21 03 20 02 10 47 41 01 6b 21 03 20 00 20 03 10 
// 0x 49 20 00 41 01 6b 24 61 20 02 10 48 23 61 20 02 6a 24 61 0b 0b 96 80 80 80 00 00 41 05 10 45 41 
// 0x 03 10 48 41 01 10 45 41 00 10 45 41 01 10 45 0b 89 82 80 80 00 08 01 7f 01 7f 01 7f 01 7f 01 7f 
// 0x 01 7f 01 7f 01 7f 41 00 21 00 23 5f 23 50 6a 10 02 21 00 41 00 21 01 23 61 21 01 20 00 04 40 20 
// 0x 00 23 38 6a 10 02 04 40 41 06 10 45 41 00 10 45 41 00 21 02 23 61 21 02 41 00 10 45 41 00 21 03 
// 0x 41 00 21 03 41 00 21 04 20 00 23 36 6a 10 02 21 04 02 40 03 40 20 04 23 48 6a 10 02 23 0c 46 04 
// 0x 40 20 04 23 49 6a 10 02 10 45 41 01 10 45 41 c1 00 10 45 41 00 21 05 20 04 23 4e 6a 10 02 23 4b 
// 0x 6a 10 02 21 05 20 05 10 44 10 48 41 0b 10 45 20 03 41 01 6a 21 03 23 62 41 01 6a 24 62 0b 20 04 
// 0x 23 47 6a 10 02 21 04 20 04 45 04 40 0c 02 00 0b 0c 00 00 0b 0b 41 00 21 06 23 61 20 02 6b 21 06 
// 0x 41 00 21 07 20 03 10 47 20 06 10 47 41 02 6b 6a 21 07 20 02 20 07 10 49 20 02 41 01 6b 24 61 20 
// 0x 06 10 48 20 03 10 48 23 61 20 06 41 01 6b 6a 24 61 0b 0b 23 62 45 04 40 20 01 24 61 0b 0b c2 80 
// 0x 80 80 00 01 01 7f 41 00 21 01 23 5d 20 00 23 4d 6a 10 02 23 4b 6a 10 02 10 27 21 01 20 00 23 4e 
// 0x 6a 10 02 10 5b 20 01 23 4c 6a 10 02 23 5e 46 04 40 41 24 10 45 05 41 21 10 45 0b 20 01 23 4a 6a 
// 0x 10 02 10 48 0b b8 81 80 80 00 00 20 00 23 24 46 04 40 41 c6 00 10 45 0b 20 00 23 25 46 04 40 41 
// 0x c7 00 10 45 0b 20 00 23 26 46 04 40 41 c8 00 10 45 0b 20 00 23 27 46 04 40 41 cc 00 10 45 0b 20 
// 0x 00 23 28 46 04 40 41 ca 00 10 45 0b 20 00 23 29 46 04 40 41 ce 00 10 45 0b 20 00 23 2a 46 04 40 
// 0x 41 ea 00 10 45 0b 20 00 23 2b 46 04 40 41 eb 00 10 45 0b 20 00 23 2c 46 04 40 41 ec 00 10 45 0b 
// 0x 20 00 23 2d 46 04 40 41 ed 00 10 45 0b 20 00 23 2e 46 04 40 41 ef 00 10 45 0b 20 00 23 23 46 04 
// 0x 40 41 f1 00 10 45 0b 20 00 23 22 46 04 40 41 f2 00 10 45 0b 20 00 23 2f 46 04 40 41 f2 00 10 45 
// 0x 0b 0b af 80 80 80 00 01 01 7f 41 00 21 01 20 00 23 49 6a 10 02 21 01 20 01 23 2b 46 04 40 41 c1 
// 0x 00 10 45 41 00 10 45 0b 20 00 23 4e 6a 10 02 10 5b 20 01 10 50 0b f2 80 80 80 00 03 01 7f 01 7f 
// 0x 01 7f 41 00 21 01 20 00 23 49 6a 10 02 21 01 41 00 21 02 41 00 21 02 20 01 23 11 46 04 40 41 c1 
// 0x 00 10 45 20 00 23 4b 6a 10 02 10 44 21 02 20 02 10 48 05 20 01 23 0f 46 04 40 41 00 21 03 23 5d 
// 0x 20 00 23 4b 6a 10 02 10 27 21 03 20 03 23 4c 6a 10 02 23 5e 46 04 40 41 23 10 45 05 41 20 10 45 
// 0x 0b 20 03 23 4a 6a 10 02 10 48 0b 0b 0b fb 81 80 80 00 04 01 7f 01 7f 01 7f 01 7f 41 00 21 01 20 
// 0x 00 23 51 6a 10 02 21 01 41 00 21 02 20 01 23 36 6a 10 02 21 02 02 40 03 40 20 02 45 04 40 0c 02 
// 0x 00 0b 20 02 10 5b 20 02 23 47 6a 10 02 21 02 0c 00 00 0b 0b 41 00 21 03 20 00 23 4b 6a 10 02 21 
// 0x 03 20 03 41 f3 00 41 f4 00 41 ef 00 41 f2 00 41 e5 00 41 33 41 32 10 17 04 40 41 36 10 45 41 00 
// 0x 10 45 41 00 10 45 05 20 03 41 f3 00 41 f4 00 41 ef 00 41 f2 00 41 e5 00 41 38 10 16 04 40 41 3a 
// 0x 10 45 41 00 10 45 41 00 10 45 05 20 03 41 ec 00 41 ef 00 41 e1 00 41 e4 00 41 33 41 32 10 16 04 
// 0x 40 41 28 10 45 41 00 10 45 41 00 10 45 05 20 03 41 ec 00 41 ef 00 41 e1 00 41 e4 00 41 38 10 15 
// 0x 04 40 41 2d 10 45 41 00 10 45 41 00 10 45 05 41 00 21 04 23 5d 20 03 10 27 21 04 41 10 10 45 20 
// 0x 04 23 4a 6a 10 02 10 48 0b 0b 0b 0b 0b 83 81 80 80 00 05 01 7f 01 7f 01 7f 01 7f 01 7f 41 00 21 
// 0x 01 20 00 23 48 6a 10 02 21 01 41 00 21 02 20 00 23 49 6a 10 02 21 02 41 00 21 03 20 00 23 4c 6a 
// 0x 10 02 21 03 20 03 04 40 20 03 24 5d 0b 41 00 21 04 20 00 23 50 6a 10 02 21 04 41 00 21 05 20 04 
// 0x 23 36 6a 10 02 21 05 02 40 03 40 20 05 45 04 40 0c 02 00 0b 20 05 10 5b 20 05 23 47 6a 10 02 21 
// 0x 05 0c 00 00 0b 0b 20 03 04 40 23 5d 23 55 6a 10 02 24 5d 0b 0b 95 80 80 80 00 01 01 7f 41 00 21 
// 0x 01 20 00 23 4d 6a 10 02 21 01 20 01 10 5b 0b bd 80 80 80 00 01 01 7f 20 00 23 4f 6a 10 02 10 5b 
// 0x 41 04 10 45 41 c0 00 10 45 20 00 23 4d 6a 10 02 10 5b 41 00 21 01 20 00 23 4e 6a 10 02 21 01 20 
// 0x 01 04 40 41 05 10 45 20 01 10 5b 0b 41 0b 10 45 0b d0 80 80 80 00 02 01 7f 01 7f 41 00 21 00 23 
// 0x 5d 21 00 41 00 21 01 41 00 21 01 02 40 03 40 20 00 45 04 40 0c 02 00 0b 20 00 23 53 6a 10 02 23 
// 0x 48 6a 10 02 23 08 46 04 40 0c 02 00 0b 20 01 41 01 6a 21 01 20 00 23 55 6a 10 02 21 00 0c 00 00 
// 0x 0b 0b 20 01 0f 0b ad 80 80 80 00 00 41 02 10 45 41 c0 00 10 45 41 03 10 45 41 c0 00 10 45 20 00 
// 0x 23 4d 6a 10 02 10 5b 41 0c 10 45 41 00 10 45 41 0b 10 45 41 0b 10 45 0b 8d 80 80 80 00 00 41 0c 
// 0x 10 45 10 57 41 01 6b 10 48 0b 8a 80 80 80 00 00 41 0c 10 45 10 57 10 48 0b c0 81 80 80 00 02 01 
// 0x 7f 01 7f 41 00 21 01 20 00 23 48 6a 10 02 21 01 41 00 21 02 20 00 23 49 6a 10 02 21 02 20 01 23 
// 0x 02 46 04 40 20 00 10 54 05 20 01 23 03 46 04 40 20 02 23 21 46 04 40 20 00 10 4f 05 20 00 23 4d 
// 0x 6a 10 02 10 5b 20 00 23 4e 6a 10 02 10 5b 20 02 10 50 0b 05 20 01 23 04 46 04 40 20 00 10 51 05 
// 0x 20 01 23 05 46 04 40 20 00 10 53 05 20 01 23 06 46 04 40 20 00 10 55 05 20 01 23 07 46 04 40 20 
// 0x 00 10 56 05 20 01 23 08 46 04 40 20 00 10 58 05 20 01 23 09 46 04 40 20 00 10 59 05 20 01 23 0a 
// 0x 46 04 40 20 00 10 5a 05 20 01 23 0e 46 04 40 20 00 10 52 0b 0b 0b 0b 0b 0b 0b 0b 0b 0b 0b a0 81 
// 0x 80 80 00 05 01 7f 01 7f 01 7f 01 7f 01 7f 41 00 10 45 41 00 21 01 23 61 21 01 41 00 21 02 20 00 
// 0x 23 51 6a 10 02 21 02 20 02 23 38 6a 10 02 10 48 41 00 21 03 20 02 23 36 6a 10 02 21 03 02 40 03 
// 0x 40 20 03 45 04 40 0c 02 00 0b 41 01 10 45 20 03 23 49 6a 10 02 10 45 20 03 23 3a 6a 10 02 21 03 
// 0x 0c 00 00 0b 0b 20 00 23 4d 6a 10 02 10 5b 41 0b 10 45 41 00 21 04 23 61 20 01 6b 21 04 41 00 21 
// 0x 05 20 04 10 47 41 01 6b 21 05 20 01 20 05 10 49 20 01 41 01 6b 24 61 20 04 10 48 23 61 20 04 6a 
// 0x 24 61 0b 9b 81 80 80 00 05 01 7f 01 7f 01 7f 01 7f 01 7f 23 63 04 40 41 0a 10 45 41 00 10 45 41 
// 0x 00 21 00 23 61 21 00 23 63 10 48 41 00 21 01 23 5f 23 50 6a 10 02 21 01 41 00 21 02 20 01 23 36 
// 0x 6a 10 02 21 02 02 40 03 40 20 02 23 48 6a 10 02 23 0b 46 04 40 20 02 10 5c 0b 20 02 23 47 6a 10 
// 0x 02 21 02 20 02 45 04 40 0c 02 00 0b 0c 00 00 0b 0b 41 00 21 03 23 61 20 00 6b 21 03 41 00 21 04 
// 0x 20 03 10 47 41 01 6b 21 04 20 00 20 04 10 49 20 00 41 01 6b 24 61 20 03 10 48 23 61 20 03 6a 24 
// 0x 61 0b 0b cc 80 80 80 00 00 20 00 41 80 02 6a 10 0b 24 60 23 60 23 35 6a 24 61 23 5f 23 4c 6a 10 
// 0x 02 24 5d 41 00 10 45 41 e1 00 10 45 41 f3 00 10 45 41 ed 00 10 45 41 01 10 46 10 4b 10 4c 10 4d 
// 0x 10 4e 10 5d 23 60 23 34 6a 23 61 23 60 23 34 6a 6b 10 00 0b c1 80 80 80 00 00 23 64 23 65 41 e6 
// 0x 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 f5 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 ee 
// 0x 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 0b f1 80 80 80 00 00 
// 0x 23 64 23 65 41 e5 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 ee 00 10 0e 23 65 41 01 6a 24 65 
// 0x 23 64 23 65 41 e4 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 e6 00 10 0e 23 65 41 01 6a 24 65 
// 0x 23 64 23 65 41 f5 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 ee 00 10 0e 23 65 41 01 6a 24 65 
// 0x 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 0b bf 80 80 80 00 00 23 64 23 65 41 e9 00 10 0e 23 
// 0x 65 41 01 6a 24 65 23 64 23 65 41 33 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 32 10 0e 23 65 41 
// 0x 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 0b ab 83 80 80 00 00 41 e4 00 10 0b 24 
// 0x 64 10 61 23 64 23 65 41 e7 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 
// 0x 24 65 23 64 23 65 41 3a 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 3d 10 0e 23 65 41 01 6a 24 65 
// 0x 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 33 10 0e 23 65 41 01 6a 24 65 23 64 
// 0x 23 65 41 20 10 0e 23 65 41 01 6a 24 65 10 61 23 64 23 65 41 e8 00 10 0e 23 65 41 01 6a 24 65 23 
// 0x 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 3a 10 0e 23 65 41 01 6a 24 65 23 64 23 
// 0x 65 41 3d 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 
// 0x 34 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 10 5f 23 64 23 65 41 
// 0x f8 00 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 28 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 29 
// 0x 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 e7 00 10 
// 0x 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 3a 10 0e 23 
// 0x 65 41 01 6a 24 65 23 64 23 65 41 3d 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 
// 0x 01 6a 24 65 23 64 23 65 41 2d 10 0e 23 65 41 01 6a 24 65 23 64 23 65 41 e8 00 10 0e 23 65 41 01 
// 0x 6a 24 65 23 64 23 65 41 20 10 0e 23 65 41 01 6a 24 65 10 60 23 64 10 22 10 43 23 64 10 0c 10 5e 
// 0x 23 60 0f 0b

// Input: 
//   i32 g := 3
//   i32 h := 4
//   fun x()
//     g := -h
//   endfun

// Output: 
// 0x 00 61 73 6d 01 00 00 00
// 0x 01 04 01 60 00 00 
// 0x 03 02 01 00
// 0x 05 03 01 00 01
// 0x 06 0b 02 7f 01 41 03 0b 7f 01 41 0f 0b
// 0x 0a 0b 01 09 00 41 00 23 01 6b 24 00 0b

// Pierre Rossouw, June 2017
</code></pre>
  <script src="prism.js"></script>
</body>
</html>
